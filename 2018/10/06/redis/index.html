<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="msvalidate.01" content="882A4E15FB483D0DD65BAC2CD6F114BD"><meta name="description" content="Wing's Blog"><title>深入理解Redis | Wing</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">深入理解Redis</h1><a id="logo" href="/.">Wing</a><p class="description">大道至简</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/books/"><i class="fa fa-book"> 书籍</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">深入理解Redis</h1><div class="post-meta">Oct 6, 2018<span> | </span><span class="category"><a href="/categories/Redis/">Redis</a></span></div><a class="disqus-comment-count" data-disqus-identifier="2018/10/06/redis/" href="/2018/10/06/redis/#disqus_thread"></a><div class="post-content"><div id="content">
<div id="table-of-contents">
<h2>&#x76EE;&#x5F55;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org121625b">1. &#x4E3A;org-babel&#x6DFB;&#x52A0;&#x5BF9;redis&#x7684;&#x652F;&#x6301;</a></li>
<li><a href="#org3f4d43f">2. &#x5B89;&#x88C5;redis</a>
<ul>
<li><a href="#org435a07a">2.1. &#x76F4;&#x63A5;&#x5B89;&#x88C5;</a></li>
<li><a href="#orgc4b1619">2.2. &#x7F16;&#x8BD1;&#x5B89;&#x88C5;</a></li>
</ul>
</li>
<li><a href="#orgef69d7b">3. &#x5E38;&#x89C1;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x64CD;&#x4F5C;</a>
<ul>
<li><a href="#org6ddc12b">3.1. Strings&#x7C7B;&#x578B;&#x6570;&#x636E;</a></li>
<li><a href="#org7bb05f1">3.2. Hashes&#x7C7B;&#x578B;</a></li>
<li><a href="#org34575d0">3.3. Lists&#x7C7B;&#x578B;</a></li>
<li><a href="#org67074cd">3.4. Sets&#x7C7B;&#x578B;</a></li>
<li><a href="#orgfa8a2ad">3.5. Sorted sets&#x7C7B;&#x578B;</a></li>
</ul>
</li>
<li><a href="#org9cc5d44">4. &#x5E38;&#x7528;&#x547D;&#x4EE4;</a>
<ul>
<li><a href="#org9363d58">4.1. &#x952E;&#x503C;&#x76F8;&#x5173;&#x547D;&#x4EE4;</a></li>
<li><a href="#org17b5ae2">4.2. &#x670D;&#x52A1;&#x5668;&#x76F8;&#x5173;&#x547D;&#x4EE4;</a></li>
</ul>
</li>
<li><a href="#org52cd20b">5. Redis&#x9AD8;&#x7EA7;&#x4F7F;&#x7528;&#x7279;&#x6027;</a>
<ul>
<li><a href="#orgdd1c139">5.1. &#x5B89;&#x5168;&#x6027;</a></li>
<li><a href="#orgf9a42f0">5.2. &#x4E3B;&#x4ECE;&#x590D;&#x5236;</a></li>
<li><a href="#org23c7e81">5.3. &#x4E8B;&#x52A1;&#x5904;&#x7406;</a></li>
<li><a href="#org01d0827">5.4. &#x6301;&#x4E45;&#x5316;&#x673A;&#x5236;</a></li>
<li><a href="#org0cd32e5">5.5. &#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x4FE1;&#x606F;</a></li>
<li><a href="#orga3b33f3">5.6. &#x865A;&#x62DF;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;</a></li>
</ul>
</li>
<li><a href="#orgaa8e13e">6. &#x4E3A;web&#x5E94;&#x7528;&#x6DFB;&#x52A0;&#x9875;&#x9762;&#x7F13;&#x5B58;&#x529F;&#x80FD;</a></li>
<li><a href="#orgfe5787f">7. &#x53C2;&#x8003;&#x6587;&#x7AE0;</a></li>
</ul>
</div>
</div>
<p>
&#x521A;&#x5F00;&#x59CB;&#x53EA;&#x662F;&#x4F7F;&#x7528;&#x60F3;&#x5B66;&#x4E60;&#x4E00;&#x79CD;&#x7528;&#x505A;&#x7F13;&#x5B58;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8FB9;&#x770B;&#x89C6;&#x9891;&#xFF0C;&#x8FB9;&#x7FFB;&#x9605;&#x5B98;&#x65B9;&#x7684;&#x6587;&#x6863;&#x624D;&#x53D1;&#x73B0;Redis&#x5982;&#x6B64;&#x5F3A;&#x5927;&#x3002;Redis&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5B83;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x652F;&#x6301;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x3002;&#x4F20;&#x7EDF;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F60;&#x53EA;&#x80FD;&#x7ED9;&#x5B57;&#x7B26;&#x7C7B;&#x578B;&#x7684;&#x952E;&#x7ED1;&#x5B9A;&#x5B57;&#x7B26;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x503C;&#xFF0C;&#x5728;Redis&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;&#x5230;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;
</p>

<div id="outline-container-org121625b" class="outline-2">
<h2 id="org121625b"><span class="section-number-2">1</span> &#x4E3A;org-babel&#x6DFB;&#x52A0;&#x5BF9;redis&#x7684;&#x652F;&#x6301;</h2>
<div class="outline-text-2" id="text-1">
<p>
&#x914D;&#x7F6E;org-redis
</p>
<div class="org-src-container">
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.emacs.d/private</span><br><span class="line">git <span class="built_in">clone</span> \</span><br><span class="line">  https://github.com/stardiviner/ob-redis.git</span><br><span class="line">.spacemacs</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x4FEE;&#x6539;.spacemacs&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x4E24;&#x884C;
</p>
<div class="org-src-container">
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">add-to-list</span> <span class="quoted">&apos;load-path</span></span><br><span class="line">    <span class="string">&quot;~/.emacs.d/private/ob-redis&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="list">(<span class="keyword">org-babel-do-load-languages</span></span><br><span class="line"> <span class="quoted">&apos;org-babel-load-languages</span></span><br><span class="line"> <span class="quoted">&apos;(</span><br><span class="line">   (redis .<span class="literal">t</span>)</span><br><span class="line">   )</span>)</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org3f4d43f" class="outline-2">
<h2 id="org3f4d43f"><span class="section-number-2">2</span> &#x5B89;&#x88C5;redis</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org435a07a" class="outline-3">
<h3 id="org435a07a"><span class="section-number-3">2.1</span> &#x76F4;&#x63A5;&#x5B89;&#x88C5;</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install wget curl build-essential tcl -y</span><br><span class="line">sudo apt-get install redis-server -y</span><br><span class="line"><span class="comment">#&#x67E5;&#x770B;&#x662F;&#x5426;&#x542F;&#x52A8;</span></span><br><span class="line">netstat -tunpl | grep <span class="number">6379</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgc4b1619" class="outline-3">
<h3 id="orgc4b1619"><span class="section-number-3">2.2</span> &#x7F16;&#x8BD1;&#x5B89;&#x88C5;</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget http://download.redis.io/redis-stable.tar.gz</span><br><span class="line">tar -xvzf redis-stable.tar.gz</span><br><span class="line"><span class="built_in">cd</span> redis-stable</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">mkdir /etc/redis</span><br><span class="line">mkdir /var/redis</span><br><span class="line">adduser --system --group --no-create-home redis</span><br><span class="line">chown redis:redis /var/redis</span><br><span class="line">chmod <span class="number">770</span> /var/redis</span><br><span class="line">cp redis-stable/redis.conf /etc/redis/</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x66F4;&#x6539;&#x8FD9;&#x51E0;&#x884C;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">##Default port to listen reids. You can also change it as per your need.</span><br><span class="line">port  6379</span><br><span class="line">## If you run Redis from upstart or systemd.</span><br><span class="line">supervised systemd</span><br><span class="line">##Path of the Redis log.</span><br><span class="line">logfile /var/log/redis.log</span><br><span class="line">##Location of the Redis data.</span><br><span class="line">dir  /var/redis/</span><br><span class="line">##IP address to listen Redis on. You can also specify multiple IP address.</span><br><span class="line">bind 192.168.0.101</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x6DFB;&#x52A0;service
</p>
<div class="org-src-container">
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="title">[Unit]</span></span><br><span class="line"><span class="setting">Description=<span class="value">Redis In-Memory Data Store</span></span></span><br><span class="line"><span class="setting">After=<span class="value">network.target</span></span></span><br><span class="line"><span class="title"></span><br><span class="line">[Service]</span></span><br><span class="line"><span class="setting">User=<span class="value">redis</span></span></span><br><span class="line"><span class="setting">Group=<span class="value">redis</span></span></span><br><span class="line"><span class="setting">ExecStart=<span class="value">/usr/local/bin/redis-server /etc/redis/redis.conf</span></span></span><br><span class="line"><span class="setting">ExecStop=<span class="value">/usr/local/bin/redis-cli shutdown</span></span></span><br><span class="line"><span class="setting">Restart=<span class="value">always</span></span></span><br><span class="line"><span class="title"></span><br><span class="line">[Install]</span></span><br><span class="line"><span class="setting">WantedBy=<span class="value">multi-user.target</span></span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="outline-container-orgef69d7b" class="outline-2">
<h2 id="orgef69d7b"><span class="section-number-2">3</span> &#x5E38;&#x89C1;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x64CD;&#x4F5C;</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org6ddc12b" class="outline-3">
<h3 id="org6ddc12b"><span class="section-number-3">3.1</span> Strings&#x7C7B;&#x578B;&#x6570;&#x636E;</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Strings&#x662F;&#x6700;&#x57FA;&#x672C;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4E00;&#x4E2A;Key&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;Value&#xFF0C;string&#x7C7B;&#x578B;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x5168;&#x7684;&#x3002;Redis&#x7684;string&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#xFF0C;&#x6BD4;&#x5982;jpg&#x56FE;&#x7247;&#x6216;&#x8005;&#x5E8F;&#x5217;&#x5316;Ruby&#x5BF9;&#x8C61;&#x3002;
String&#x7684;&#x503C;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x662F;512MB&#x3002;
</p>
</div>

<div id="outline-container-orgc5957de" class="outline-4">
<h4 id="orgc5957de"><span class="section-number-4">3.1.1</span> set</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
&#x8BBE;&#x7F6E;key&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x4E3A;string&#x7C7B;&#x578B;&#x7684;value&#x3002;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">set name &quot;wing&quot;
get name</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x7528;&#x4F8B;&#xFF1A;&#x5206;&#x5E03;&#x5F0F;&#x9501;<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisTool</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LOCK_SUCCESS = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SET_IF_NOT_EXIST = <span class="string">&quot;NX&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SET_WITH_EXPIRE_TIME = <span class="string">&quot;PX&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Long RELEASE_SUCCESS = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * &#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x5206;&#x5E03;&#x5F0F;&#x9501;</span><br><span class="line">     * <span class="doctag">@param</span> jedis Redis&#x5BA2;&#x6237;&#x7AEF;</span><br><span class="line">     * <span class="doctag">@param</span> lockKey &#x9501;</span><br><span class="line">     * <span class="doctag">@param</span> requestId &#x8BF7;&#x6C42;&#x6807;&#x8BC6;</span><br><span class="line">     * <span class="doctag">@param</span> expireTime &#x8D85;&#x671F;&#x65F6;&#x95F4;</span><br><span class="line">     * <span class="doctag">@return</span> &#x662F;&#x5426;&#x83B7;&#x53D6;&#x6210;&#x529F;</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">tryGetDistributedLock</span><span class="params">(Jedis jedis, String lockKey, String requestId, <span class="keyword">int</span> expireTime)</span> </span>{</span><br><span class="line"></span><br><span class="line">	String result = jedis.set(lockKey, requestId, SET_IF_NOT_EXIST, SET_WITH_EXPIRE_TIME, expireTime);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (LOCK_SUCCESS.equals(result)) {</span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * &#x91CA;&#x653E;&#x5206;&#x5E03;&#x5F0F;&#x9501;</span><br><span class="line">     * <span class="doctag">@param</span> jedis Redis&#x5BA2;&#x6237;&#x7AEF;</span><br><span class="line">     * <span class="doctag">@param</span> lockKey &#x9501;</span><br><span class="line">     * <span class="doctag">@param</span> requestId &#x8BF7;&#x6C42;&#x6807;&#x8BC6;</span><br><span class="line">     * <span class="doctag">@return</span> &#x662F;&#x5426;&#x91CA;&#x653E;&#x6210;&#x529F;</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">releaseDistributedLock</span><span class="params">(Jedis jedis, String lockKey, String requestId)</span> </span>{</span><br><span class="line"></span><br><span class="line">	String script = <span class="string">&quot;if redis.call(&apos;get&apos;, KEYS[1]) == ARGV[1] then return redis.call(&apos;del&apos;, KEYS[1]) else return 0 end&quot;</span>;</span><br><span class="line">	Object result = jedis.eval(script, Collections.singletonList(lockKey), Collections.singletonList(requestId));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (RELEASE_SUCCESS.equals(result)) {</span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org9573145" class="outline-4">
<h4 id="org9573145"><span class="section-number-4">3.1.2</span> setnx</h4>
<div class="outline-text-4" id="text-3-1-2">
<p>
&#x8BBE;&#x7F6E;key&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x4E3A;string&#x7C7B;&#x578B;&#x7684;value&#xFF0C;&#x5982;&#x679C;key&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#xFF0C;&#x8FD4;&#x56DE;0&#xFF0C;nx&#x662F;not exist&#x7684;&#x610F;&#x601D;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">setnx name &quot;wing&quot;
get name</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x7528;&#x4F8B;&#xFF1A;&#x5206;&#x5E03;&#x5F0F;&#x9501;<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>
</p>
</div>
</div>
<div id="outline-container-org1734c39" class="outline-4">
<h4 id="org1734c39"><span class="section-number-4">3.1.3</span> setex</h4>
<div class="outline-text-4" id="text-3-1-3">
<p>
&#x8BBE;&#x7F6E;key&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x4E3A;string&#x7C7B;&#x578B;&#x7684;value&#xFF0C;&#x5E76;&#x6307;&#x5B9A;&#x952E;&#x503C;&#x5BF9;&#x5E94;&#x7684;&#x6709;&#x6548;&#x671F;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">setex action 10 start
get action</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org51d9d04" class="outline-4">
<h4 id="org51d9d04"><span class="section-number-4">3.1.4</span> setrange</h4>
<div class="outline-text-4" id="text-3-1-4">
<p>
&#x8BBE;&#x7F6E;&#x6307;&#x5B9A;key&#x7684;value&#x503C;&#x7684;&#x5B57;&#x7B26;&#x521B;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">set email wing-ho@163.com
get email
setrange email 8 gmail.com
get email</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org3186e07" class="outline-4">
<h4 id="org3186e07"><span class="section-number-4">3.1.5</span> mset</h4>
<div class="outline-text-4" id="text-3-1-5">
<p>
&#x4E00;&#x6B21;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;&#x503C;&#xFF0C;&#x6210;&#x529F;&#x8FD4;&#x56DE;OK&#xFF0C;&#x8868;&#x793A;&#x6240;&#x6709;&#x7684;&#x503C;&#x90FD;&#x8BBE;&#x7F6E;&#x4E86;&#xFF0C;&#x5931;&#x8D25;&#x8FD4;&#x56DE;0&#x8868;&#x793A;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x503C;&#x88AB;&#x8BBE;&#x7F6E;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">mset name wing passwd 1234 age 30
get name
get passwd
get age</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org0d4f34d" class="outline-4">
<h4 id="org0d4f34d"><span class="section-number-4">3.1.6</span> msetnx</h4>
<div class="outline-text-4" id="text-3-1-6">
<p>
&#x4E00;&#x6B21;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;&#x503C;&#xFF0C;&#x6210;&#x529F;&#x8FD4;&#x56DE;OK&#xFF0C;&#x8868;&#x793A;&#x6240;&#x6709;&#x7684;&#x503C;&#x90FD;&#x8BBE;&#x7F6E;&#x4E86;&#xFF0C;&#x5931;&#x8D25;&#x8FD4;&#x56DE;0&#x8868;&#x793A;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x503C;&#x88AB;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F46;&#x4E0D;&#x4F1A;&#x8986;&#x76D6;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x53EF;&#x4EE5;&#x3002;
</p>

<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushall
set name wing
msetnx name wing passwd 1234 age 30
get passwd</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgca3e896" class="outline-4">
<h4 id="orgca3e896"><span class="section-number-4">3.1.7</span> get</h4>
<div class="outline-text-4" id="text-3-1-7">
<p>
&#x83B7;&#x53D6;key&#x5BF9;&#x5E94;&#x7684;string&#x503C;&#xFF0C;&#x5982;&#x679C;key&#x4E0D;&#x5B58;&#x5728;&#x8FD4;&#x56DE;nil
</p>
</div>
</div>
<div id="outline-container-orgf3a1a63" class="outline-4">
<h4 id="orgf3a1a63"><span class="section-number-4">3.1.8</span> getset</h4>
<div class="outline-text-4" id="text-3-1-8">
<p>
&#x8BBE;&#x7F6E;key&#x7684;&#x503C;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;key&#x7684;&#x65E7;&#x503C;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">set age 30
getset age 20</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org067f058" class="outline-4">
<h4 id="org067f058"><span class="section-number-4">3.1.9</span> getrange</h4>
<div class="outline-text-4" id="text-3-1-9">
<p>
&#x83B7;&#x53D6;key&#x7684;value&#x503C;&#x7684;&#x5B50;&#x5B57;&#x7B26;&#x4E32;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">set name hegenrong
getrange name 0 4</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-org6d5cd79" class="outline-4">
<h4 id="org6d5cd79"><span class="section-number-4">3.1.10</span> mget</h4>
<div class="outline-text-4" id="text-3-1-10">
<p>
&#x4E00;&#x6B21;&#x83B7;&#x53D6;&#x591A;&#x4E2A;key&#x7684;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x5BF9;&#x5E94;&#x7684;key&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x5BF9;&#x5E94;&#x8FD4;&#x56DE;nil
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">mget name passwd age</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgd9ac5db" class="outline-4">
<h4 id="orgd9ac5db"><span class="section-number-4">3.1.11</span> incr</h4>
<div class="outline-text-4" id="text-3-1-11">
<p>
&#x5BF9;key&#x7684;&#x503C;&#x505A;++&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x65B0;&#x7684;&#x503C;&#x3002;&#x5982;&#x679C;key&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x518D;&#x6267;&#x884C;++&#x64CD;&#x4F5C;&#x3002;
</p>

<p>
&#x7528;&#x4F8B;&#xFF1A;&#x8BA1;&#x6570;&#x5668;&#x3002;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x9650;&#x5236;&#x4E00;&#x4E2A;IP&#x5BF9;&#x67D0;&#x4E2A;API&#x7684;&#x8BBF;&#x95EE;&#x901F;&#x7387;<sup><a id="fnr.2.100" class="footref" href="#fn.2">2</a></sup>&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">incr counter</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org43a5c90" class="outline-4">
<h4 id="org43a5c90"><span class="section-number-4">3.1.12</span> incrby</h4>
<div class="outline-text-4" id="text-3-1-12">
<p>
&#x540C;incr&#x7C7B;&#x4F3C;&#xFF0C;&#x52A0;&#x6307;&#x5B9A;&#x503C;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">incrby counter 10</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org421b31d" class="outline-4">
<h4 id="org421b31d"><span class="section-number-4">3.1.13</span> decr</h4>
<div class="outline-text-4" id="text-3-1-13">
<p>
&#x5BF9;key&#x7684;&#x503C;&#x505A;&#x2013;&#x64CD;&#x4F5C;&#x3002;
</p>
</div>
</div>
<div id="outline-container-orgeaaefc5" class="outline-4">
<h4 id="orgeaaefc5"><span class="section-number-4">3.1.14</span> decrby</h4>
<div class="outline-text-4" id="text-3-1-14">
<p>
&#x540C;decr&#x7C7B;&#x4F3C;&#xFF0C;&#x51CF;&#x6307;&#x5B9A;&#x503C;&#x3002;
</p>
</div>
</div>
<div id="outline-container-org1ce80fb" class="outline-4">
<h4 id="org1ce80fb"><span class="section-number-4">3.1.15</span> append</h4>
<div class="outline-text-4" id="text-3-1-15">
<p>
&#x7ED9;&#x6307;&#x5B9A;key&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x8FFD;&#x52A0;value&#xFF0C;&#x8FD4;&#x56DE;&#x65B0;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#x3002;
</p>

<p>
&#x7528;&#x4F8B;&#xFF1A;&#x8BB0;&#x5F55;&#x65F6;&#x5E8F;&#x6570;&#x636E;<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">append timeseries &quot;0043&quot;
append timeseries &quot;0035&quot;
getrange timeseries 0 3
getrange timeseries 4 7</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org02497a9" class="outline-4">
<h4 id="org02497a9"><span class="section-number-4">3.1.16</span> strlen</h4>
<div class="outline-text-4" id="text-3-1-16">
<p>
&#x53D6;&#x6307;&#x5B9A;key&#x7684;value&#x503C;&#x7684;&#x957F;&#x5EA6;&#x3002;key&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;0&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">strlen email
strlen noexistkey</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="outline-container-org7bb05f1" class="outline-3">
<h3 id="org7bb05f1"><span class="section-number-3">3.2</span> Hashes&#x7C7B;&#x578B;</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Redis hash&#x662F;&#x4E00;&#x4E2A;string&#x7C7B;&#x578B;&#x7684;field&#x548C;value&#x7684;&#x6620;&#x5C04;&#x8868;&#x3002;&#x5B83;&#x7684;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x90FD;&#x662F;O(1)&#xFF08;&#x5E73;&#x5747;&#xFF09;&#x3002;hash&#x7279;&#x522B;&#x9002;&#x5408;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x5BF9;&#x8C61;&#x3002;&#x76F8;&#x8F83;&#x4E8E;&#x5C06;&#x5BF9;&#x8C61;&#x7684;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x5B58;&#x6210;&#x5355;&#x4E2A;stirng&#x7C7B;&#x578B;&#x3002;&#x5C06;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x5728;hash&#x7C7B;&#x578B;&#x4E2D;&#x4F1A;&#x5360;&#x7528;&#x66F4;&#x5C11;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x66F4;&#x65B9;&#x4FBF;&#x7684;&#x5B58;&#x53D6;&#x6574;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;
</p>
</div>
<div id="outline-container-orgdadf363" class="outline-4">
<h4 id="orgdadf363"><span class="section-number-4">3.2.1</span> hset</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
&#x8BBE;&#x7F6E;hash field&#x4E3A;&#x6307;&#x5B9A;&#x503C;&#xFF0C;&#x5982;&#x679C;key&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x5148;&#x521B;&#x5EFA;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hset myhash field1 Hello
hget myhash field1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org39a08b6" class="outline-4">
<h4 id="org39a08b6"><span class="section-number-4">3.2.2</span> hsetnx</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
&#x8BBE;&#x7F6E;hash field&#x4E3A;&#x6307;&#x5B9A;&#x503C;&#xFF0C;&#x5982;&#x679C;key&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x5148;&#x521B;&#x5EFA;&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;&#x8FD4;&#x56DE;0&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
hsetnx myhash field1 hello
hsetnx myhash field1 hello</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org509f661" class="outline-4">
<h4 id="org509f661"><span class="section-number-4">3.2.3</span> hmset</h4>
<div class="outline-text-4" id="text-3-2-3">
<p>
&#x540C;&#x65F6;&#x8BBE;&#x7F6E;bash&#x7684;&#x591A;&#x4E2A;field&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hmset myhash field1 hello field2 world
hmget myhash field1 field2
hmget myhash field1 field2 nofield</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgf62ee5d" class="outline-4">
<h4 id="orgf62ee5d"><span class="section-number-4">3.2.4</span> hmget</h4>
<div class="outline-text-4" id="text-3-2-4">
<p>
&#x540C;&#x65F6;&#x5168;&#x90E8;&#x6307;&#x5B9A;bash field&#xFF0C;&#x5F53;&#x6307;&#x5B9A;field&#x4E0D;&#x5B58;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD4;&#x56DE;nil
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hmget myhash field1 field2 nofield</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org3fee2f7" class="outline-4">
<h4 id="org3fee2f7"><span class="section-number-4">3.2.5</span> hincrby</h4>
<div class="outline-text-4" id="text-3-2-5">
<p>
&#x6307;&#x5B9A;&#x7684;hash field&#x52A0;&#x4E0A;&#x7ED9;&#x5B9A;&#x7684;&#x503C;&#x3002;&#x503C;&#x4E3A;64&#x4F4D;&#x6709;&#x7B26;&#x53F7;&#x6570;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hset myhash field 5
hincrby myhash field 2
hincrby myhash field -2</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orge20e290" class="outline-4">
<h4 id="orge20e290"><span class="section-number-4">3.2.6</span> hlen</h4>
<div class="outline-text-4" id="text-3-2-6">
<p>
&#x8FD4;&#x56DE;&#x6307;&#x5B9A;hash&#x7684;field&#x6570;&#x91CF;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hlen myhash</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org34cc1d2" class="outline-4">
<h4 id="org34cc1d2"><span class="section-number-4">3.2.7</span> hdel</h4>
<div class="outline-text-4" id="text-3-2-7">
<p>
&#x5220;&#x9664;&#x6307;&#x5B9A;hash&#x7684;field&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hdel myhash field</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org9c36182" class="outline-4">
<h4 id="org9c36182"><span class="section-number-4">3.2.8</span> hkeys</h4>
<div class="outline-text-4" id="text-3-2-8">
<p>
&#x8FD4;&#x56DE;hash&#x7684;&#x6240;&#x6709;field&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hkeys myhash</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org937b112" class="outline-4">
<h4 id="org937b112"><span class="section-number-4">3.2.9</span> hvals</h4>
<div class="outline-text-4" id="text-3-2-9">
<p>
&#x8FD4;&#x56DE;hash&#x7684;&#x6240;&#x6709;value&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hvals myhash</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org0dded35" class="outline-4">
<h4 id="org0dded35"><span class="section-number-4">3.2.10</span> hgeall</h4>
<div class="outline-text-4" id="text-3-2-10">
<p>
&#x83B7;&#x53D6;&#x67D0;&#x4E2A;hash&#x4E2D;&#x5168;&#x90E8;&#x7684;field&#x53CA;value&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hgetall myhash</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="outline-container-org34575d0" class="outline-3">
<h3 id="org34575d0"><span class="section-number-3">3.3</span> Lists&#x7C7B;&#x578B;</h3>
<div class="outline-text-3" id="text-3-3">
<p>
List&#x662F;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#xFF0C;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x662F;push&#x3001;pop&#x3001;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x7684;&#x6240;&#x6709;&#x503C;&#x7B49;&#x7B49;&#xFF0C;&#x64CD;&#x4F5C;&#x4E2D;key&#x7406;&#x89E3;&#x4E3A;&#x94FE;&#x8868;&#x7684;&#x540D;&#x5B57;&#x3002;Redis&#x7684;List&#x7C7B;&#x578B;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6BCF;&#x4E2A;&#x5B50;&#x5143;&#x7D20;&#x90FD;&#x662F;string&#x7C7B;&#x578B;&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;push&#x3001;pop&#x64CD;&#x4F5C;&#x4ECE;&#x94FE;&#x8868;&#x7684;&#x5934;&#x90E8;&#x6216;&#x8005;&#x5C3E;&#x90E8;&#x6DFB;&#x52A0;&#x5220;&#x9664;&#x5143;&#x7D20;&#xFF0C;&#x8FD9;&#x6837;List&#x5373;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x6808;&#xFF0C;&#x53C8;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x961F;&#x5217;&#x3002;
</p>
</div>
<div id="outline-container-orgba62f9c" class="outline-4">
<h4 id="orgba62f9c"><span class="section-number-4">3.3.1</span> lpush</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
&#x5728;key&#x5BF9;&#x5E94;&#x7684;list&#x7684;&#x5934;&#x90E8;&#x6DFB;&#x52A0;&#x5B57;&#x7B26;&#x4E32;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
lpush mylist a
lpush mylist b
lrange mylist 0 -1
flushdb
lpush mylist a b c
lrange mylist 0 -1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org42c36b1" class="outline-4">
<h4 id="org42c36b1"><span class="section-number-4">3.3.2</span> rpush</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
&#x5728;key&#x5BF9;&#x5E94;&#x7684;list&#x7684;&#x5C3E;&#x90E8;&#x6DFB;&#x52A0;&#x5B57;&#x7B26;&#x4E32;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
rpush mylist world
rpush mylist hello
lrange mylist 0 -1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org98cf03c" class="outline-4">
<h4 id="org98cf03c"><span class="section-number-4">3.3.3</span> linsert</h4>
<div class="outline-text-4" id="text-3-3-3">
<p>
&#x5728;key&#x5BF9;&#x5E94;list&#x7684;&#x7279;&#x5B9A;&#x4F4D;&#x7F6E;&#x524D;&#x6216;&#x540E;&#x6DFB;&#x52A0;&#x5B57;&#x7B26;&#x4E32;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
rpush mylist world
linsert mylist before world hello
lrange mylist 0 -1
flushdb
rpush mylist world
linsert mylist after world hello
lrange mylist 0 -1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org89527ea" class="outline-4">
<h4 id="org89527ea"><span class="section-number-4">3.3.4</span> lset</h4>
<div class="outline-text-4" id="text-3-3-4">
<p>
&#x8BBE;&#x7F6E;list&#x4E2D;&#x6307;&#x5B9A;&#x4E0B;&#x6807;&#x7684;&#x5143;&#x7D20;&#x503C;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
rpush mylist hello
lset mylist 0 world
lrange mylist 0 -1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org6a00125" class="outline-4">
<h4 id="org6a00125"><span class="section-number-4">3.3.5</span> lrem</h4>
<div class="outline-text-4" id="text-3-3-5">
<p>
&#x4ECE;key&#x5BF9;&#x5E94;&#x7684;list&#x4E2D;&#x5220;&#x9664;n&#x4E2A;&#x548C;value&#x76F8;&#x540C;&#x7684;&#x5143;&#x7D20;&#x3002;&#xFF08;n&lt;0&#x4ECE;&#x5C3E;&#x5220;&#x9664;&#xFF0C;n=0&#x5168;&#x90E8;&#x5220;&#x9664;&#xFF09;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
rpush mylist1 a b c c d c c f
lrem mylist1 2 c
lrange mylist1 0 -1
rpush mylist2 a b c c d c c f
lrem mylist1 -2 c
lrange mylist2 0 -1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgf9ce155" class="outline-4">
<h4 id="orgf9ce155"><span class="section-number-4">3.3.6</span> ltrim</h4>
<div class="outline-text-4" id="text-3-3-6">
<p>
&#x4FDD;&#x7559;&#x6307;&#x5B9A;key&#x7684;&#x503C;&#x8303;&#x56F4;&#x5185;&#x7684;&#x6570;&#x636E;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
rpush mylist a b c d e
ltrim mylist 1 -1
lrange mylist 0 -1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org139edf9" class="outline-4">
<h4 id="org139edf9"><span class="section-number-4">3.3.7</span> lpop</h4>
<div class="outline-text-4" id="text-3-3-7">
<p>
&#x4ECE;list&#x7684;&#x5934;&#x90E8;&#x5220;&#x9664;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x5220;&#x9664;&#x7684;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">lrange mylist 0 -1
lpop mylist
lrange mylist 0 -1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org4feacca" class="outline-4">
<h4 id="org4feacca"><span class="section-number-4">3.3.8</span> rpoplpush</h4>
<div class="outline-text-4" id="text-3-3-8">
<p>
&#x4ECE;&#x7B2C;&#x4E00;&#x4E2A;list&#x7684;&#x5C3E;&#x90E8;&#x79FB;&#x9664;&#x5143;&#x7D20;&#x5E76;&#x6DFB;&#x52A0;&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;list&#x7684;&#x5934;&#x90E8;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">rpush mylist1 one two three
rpush mylist2 four five six
rpoplpush mylist1 mylist2
lrange mylist1 0 -1
lrange mylist2 0 -1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org09356c2" class="outline-4">
<h4 id="org09356c2"><span class="section-number-4">3.3.9</span> lindex</h4>
<div class="outline-text-4" id="text-3-3-9">
<p>
&#x8FD4;&#x56DE;&#x540D;&#x79F0;&#x4E3A;key&#x7684;list&#x4E2D;index&#x4F4D;&#x7F6E;&#x7684;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">lrange mylist2 0 -1
lindex mylist2 0
lindex mylist2 1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org0fdc3a0" class="outline-4">
<h4 id="org0fdc3a0"><span class="section-number-4">3.3.10</span> llen</h4>
<div class="outline-text-4" id="text-3-3-10">
<p>
&#x8FD4;&#x56DE;key&#x5BF9;&#x5E94;list&#x7684;&#x957F;&#x5EA6;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">llen mylist2</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="outline-container-org67074cd" class="outline-3">
<h3 id="org67074cd"><span class="section-number-3">3.4</span> Sets&#x7C7B;&#x578B;</h3>
<div class="outline-text-3" id="text-3-4">
<p>
set&#x662F;&#x96C6;&#x5408;&#xFF0C;&#x5B83;&#x662F;string&#x7C7B;&#x578B;&#x7684;&#x65E0;&#x5E8F;&#x96C6;&#x5408;&#x3002;set&#x662F;&#x901A;&#x8FC7;hash table&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x6DFB;&#x52A0;&#x3001;&#x5220;&#x9664;&#x548C;&#x67E5;&#x627E;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F;O(1)&#x3002;&#x5BF9;&#x96C6;&#x5408;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D6;&#x5E76;&#x96C6;&#x3001;&#x4EA4;&#x96C6;&#x3001;&#x5DEE;&#x96C6;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;sns&#x4E2D;&#x597D;&#x53CB;&#x63A8;&#x8350;&#x548C;blog&#x7684;tag&#x529F;&#x80FD;&#x3002;
</p>
</div>
<div id="outline-container-orga57c4d3" class="outline-4">
<h4 id="orga57c4d3"><span class="section-number-4">3.4.1</span> sadd</h4>
<div class="outline-text-4" id="text-3-4-1">
<p>
&#x5411;&#x540D;&#x79F0;&#x4E3A;key&#x7684;set&#x4E2D;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">sadd myset hello
sadd myset world
sadd myset world
smembers myset</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org9335b20" class="outline-4">
<h4 id="org9335b20"><span class="section-number-4">3.4.2</span> srem</h4>
<div class="outline-text-4" id="text-3-4-2">
<p>
&#x5220;&#x9664;&#x540D;&#x79F0;&#x4E3A;key&#x7684;set&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
sadd myset one
sadd myset two
srem myset one
smembers myset</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org44038f3" class="outline-4">
<h4 id="org44038f3"><span class="section-number-4">3.4.3</span> spop</h4>
<div class="outline-text-4" id="text-3-4-3">
<p>
&#x968F;&#x673A;&#x8FD4;&#x56DE;&#x5E76;&#x5220;&#x9664;&#x540D;&#x79F0;&#x4E3A;key&#x7684;set&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x5143;&#x7D20;&#x3002;ver 3.2&#x5F00;&#x59CB;&#x652F;&#x6301;&#x591A;&#x4E2A;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
sadd myset one two three four five
spop myset 2</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgc93530a" class="outline-4">
<h4 id="orgc93530a"><span class="section-number-4">3.4.4</span> sdiff</h4>
<div class="outline-text-4" id="text-3-4-4">
<p>
&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x7ED9;&#x5B9A;key&#x4E0E;&#x7B2C;&#x4E00;&#x4E2A;key&#x7684;&#x5DEE;&#x96C6;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
sadd myset1 one two three four five
sadd myset2 two five six
sdiff myset1 myset2</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org1697688" class="outline-4">
<h4 id="org1697688"><span class="section-number-4">3.4.5</span> sdiffstore</h4>
<div class="outline-text-4" id="text-3-4-5">
<p>
&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x7ED9;&#x5B9A;key&#x4E0E;&#x7B2C;&#x4E00;&#x4E2A;key&#x7684;&#x5DEE;&#x96C6;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x5B58;&#x4E3A;key3&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">sdiffstore myset3 myset1 myset2
smembers myset3</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org4bf63f8" class="outline-4">
<h4 id="org4bf63f8"><span class="section-number-4">3.4.6</span> sinter</h4>
<div class="outline-text-4" id="text-3-4-6">
<p>
&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x7ED9;&#x5B9A;key&#x7684;&#x4EA4;&#x96C6;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">sinter myset3 myset1</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org3fcddb6" class="outline-4">
<h4 id="org3fcddb6"><span class="section-number-4">3.4.7</span> sinterstore</h4>
<div class="outline-text-4" id="text-3-4-7">
<p>
&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x7ED9;&#x5B9A;key&#x7684;&#x4EA4;&#x96C6;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x5B58;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;key&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">sinterstore myset4 myset3 myset1
smembers myset4</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgef4340d" class="outline-4">
<h4 id="orgef4340d"><span class="section-number-4">3.4.8</span> sunion</h4>
<div class="outline-text-4" id="text-3-4-8">
<p>
&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x7ED9;&#x5B9A;key&#x7684;&#x5E76;&#x96C6;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">sunion myset2 myset3</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org6c33032" class="outline-4">
<h4 id="org6c33032"><span class="section-number-4">3.4.9</span> sunionstore</h4>
<div class="outline-text-4" id="text-3-4-9">
<p>
&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x7ED9;&#x5B9A;key&#x7684;&#x5E76;&#x96C6;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x5B58;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;key&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">sunionstore myset5 myset2 myset3
smembers myset5</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgba35352" class="outline-4">
<h4 id="orgba35352"><span class="section-number-4">3.4.10</span> smove</h4>
<div class="outline-text-4" id="text-3-4-10">
<p>
&#x4ECE;&#x7B2C;&#x4E00;&#x4E2A;key&#x5BF9;&#x5E94;&#x7684;set&#x4E2D;&#x79FB;&#x9664;member&#x5E76;&#x6DFB;&#x52A0;&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;set&#x4E2D;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
sadd myset1 one two three
sadd myset2 four five six
smove myset1 myset2 three
smembers myset2</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgca81789" class="outline-4">
<h4 id="orgca81789"><span class="section-number-4">3.4.11</span> scard</h4>
<div class="outline-text-4" id="text-3-4-11">
<p>
&#x8FD4;&#x56DE;&#x540D;&#x79F0;&#x4E3A;key&#x7684;set&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">scard myset2
smembers myset2</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org925ce89" class="outline-4">
<h4 id="org925ce89"><span class="section-number-4">3.4.12</span> sismember</h4>
<div class="outline-text-4" id="text-3-4-12">
<p>
&#x6D4B;&#x8BD5;member&#x662F;&#x5426;&#x662F;&#x540D;&#x79F0;&#x4E3A;key&#x7684;set&#x7684;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">smembers myset2
sismember myset2 two
sismember myset2 three</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org2615cb7" class="outline-4">
<h4 id="org2615cb7"><span class="section-number-4">3.4.13</span> srandmember</h4>
<div class="outline-text-4" id="text-3-4-13">
<p>
&#x968F;&#x673A;&#x8FD4;&#x56DE;&#x540D;&#x79F0;&#x4E3A;key&#x7684;set&#x7684;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x4F46;&#x4E0D;&#x5220;&#x9664;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">sadd myset one two three four
smembers myset
srandmember myset</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfa8a2ad" class="outline-3">
<h3 id="orgfa8a2ad"><span class="section-number-3">3.5</span> Sorted sets&#x7C7B;&#x578B;</h3>
<div class="outline-text-3" id="text-3-5">
<p>
sorted set&#x662F;set&#x7684;&#x4E00;&#x4E2A;&#x5347;&#x7EA7;&#x7248;&#x672C;&#xFF0C;&#x5B83;&#x5728;set&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x987A;&#x5E8F;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x4E00;&#x5C5E;&#x6027;&#x5728;&#x6DFB;&#x52A0;&#x4FEE;&#x6539;&#x5143;&#x7D20;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#xFF0C;&#x6BCF;&#x6B21;&#x6307;&#x5B9A;&#x540E;&#xFF0C;zset&#x4F1A;&#x81EA;&#x52A8;&#x91CD;&#x65B0;&#x6309;&#x65B0;&#x7684;&#x503C;&#x8C03;&#x6574;&#x987A;&#x5E8F;&#x3002;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x6709;&#x4E24;&#x5217;&#x7684;mysql&#x8868;&#xFF0C;&#x4E00;&#x5217;&#x5B58;value&#xFF0C;&#x4E00;&#x5217;&#x5B58;&#x987A;&#x5E8F;&#x3002;&#x64CD;&#x4F5C;&#x4E2D;key&#x7406;&#x89E3;&#x4E3A;zset&#x7684;&#x540D;&#x5B57;&#x3002;
</p>
</div>
<div id="outline-container-org6cc9b52" class="outline-4">
<h4 id="org6cc9b52"><span class="section-number-4">3.5.1</span> zadd</h4>
<div class="outline-text-4" id="text-3-5-1">
<p>
&#x5411;&#x540D;&#x79F0;&#x4E3A;key&#x7684;zset&#x4E2D;&#x6DFB;&#x52A0;&#x5143;&#x7D20;member&#xFF0C;score&#x7528;&#x4E8E;&#x6392;&#x5E8F;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x5143;&#x7D20;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x66F4;&#x65B0;&#x5176;&#x987A;&#x5E8F;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
zadd myzset 1 one
zadd myzset 2 uno
zadd myzset 2 two 3 three
zrange myzset 0 -1 withscores</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org7721364" class="outline-4">
<h4 id="org7721364"><span class="section-number-4">3.5.2</span> zrem</h4>
<div class="outline-text-4" id="text-3-5-2">
<p>
&#x5220;&#x9664;&#x540D;&#x79F0;&#x4E3A;key&#x7684;zset&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">zrange myzset 0 -1 withscores
zrem myzset two
zrange myzset 0 -1 withscores</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgb7fccf6" class="outline-4">
<h4 id="orgb7fccf6"><span class="section-number-4">3.5.3</span> zincrby</h4>
<div class="outline-text-4" id="text-3-5-3">
<p>
&#x5982;&#x679C;&#x5728;&#x540D;&#x79F0;&#x4E3A;key&#x7684;zset&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x5143;&#x7D20;member&#xFF0C;&#x5219;&#x8BE5;&#x5143;&#x7D20;&#x7684;score&#x589E;&#x52A0;increment&#xFF0C;&#x5426;&#x5219;&#x5411;&#x8BE5;&#x96C6;&#x5408;&#x4E2D;&#x6DFB;&#x52A0;&#x8BE5;&#x5143;&#x7D20;&#xFF0C;&#x5176;score&#x7684;&#x503C;&#x4E3A;increment&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">zrange myzset 0 -1 withscores
zincrby myzset 2 one
zrange myzset 0 -1 withscores</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org08635cb" class="outline-4">
<h4 id="org08635cb"><span class="section-number-4">3.5.4</span> zrank</h4>
<div class="outline-text-4" id="text-3-5-4">
<p>
&#x8FD4;&#x56DE;&#x540D;&#x79F0;&#x4E3A;key&#x7684;zset&#x4E2D;memeber&#x5143;&#x7D20;&#x7684;&#x6392;&#x540D;&#xFF08;&#x6309;score&#x4ECE;&#x5C0F;&#x5230;&#x6253;&#x6392;&#x5E8F;&#xFF09;&#x5373;&#x4E0B;&#x6807;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
zadd myzset 1 one 2 two 3 three 5 five
zrange myzset 0 -1 withscores
zrank myzset two</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgbd169f9" class="outline-4">
<h4 id="orgbd169f9"><span class="section-number-4">3.5.5</span> zrevrank</h4>
<div class="outline-text-4" id="text-3-5-5">
<p>
&#x8FD4;&#x56DE;&#x540D;&#x79F0;&#x4E3A;key&#x7684;zset&#x4E2D;member&#x5143;&#x7D20;&#x7684;&#x6392;&#x540D;&#xFF08;&#x6309;score&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x6392;&#x5E8F;&#xFF09;&#x53CA;&#x4E0B;&#x6807;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">zrange myzset 0 -1 withscores
zrevrank myzset five</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org30cad6f" class="outline-4">
<h4 id="org30cad6f"><span class="section-number-4">3.5.6</span> zrevrange</h4>
<div class="outline-text-4" id="text-3-5-6">
<p>
&#x8FD4;&#x56DE;&#x540D;&#x79F0;&#x4E3A;key&#x7684;zset&#xFF08;&#x6309;score&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x987A;&#x5E8F;&#xFF09;&#x4E2D;&#x7684;index&#x4ECE;start&#x5230;end&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">zrange myzset 0 -1 withscores
zrevrange myzset 0 -1 withscores</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org71ebee7" class="outline-4">
<h4 id="org71ebee7"><span class="section-number-4">3.5.7</span> zrangebyscore</h4>
<div class="outline-text-4" id="text-3-5-7">
<p>
&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;score&#x5728;&#x7ED9;&#x5B9A;&#x533A;&#x95F4;&#x5185;&#x7684;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">zrange myzset 0 -1 withscores
zrangebyscore myzset 2 3
zrangebyscore myzset 2 3 withscores</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgcdedea7" class="outline-4">
<h4 id="orgcdedea7"><span class="section-number-4">3.5.8</span> zcount</h4>
<div class="outline-text-4" id="text-3-5-8">
<p>
&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;score&#x5728;&#x7ED9;&#x5B9A;&#x533A;&#x95F4;&#x5185;&#x7684;&#x6570;&#x91CF;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">zrange myzset 0 -1 withscores
zcount myzset 0 2</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org297e2df" class="outline-4">
<h4 id="org297e2df"><span class="section-number-4">3.5.9</span> zcard</h4>
<div class="outline-text-4" id="text-3-5-9">
<p>
&#x8FD4;&#x56DE;&#x96C6;&#x5408;&#x4E2D;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">zcard myzset</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org3a5b7a7" class="outline-4">
<h4 id="org3a5b7a7"><span class="section-number-4">3.5.10</span> zremrangebyrank</h4>
<div class="outline-text-4" id="text-3-5-10">
<p>
&#x5220;&#x9664;&#x96C6;&#x5408;&#x4E2D;&#x6392;&#x540D;&#x5728;&#x7ED9;&#x5B9A;&#x533A;&#x95F4;&#x7684;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
zadd myzset 1 one 2 two 3 three 5 five
zremrangebyrank myzset 0 1
zrange myzset 0 -1 withscores
zremrangebyrank myzset 0 0
zrange myzset 0 -1 withscores</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org3020167" class="outline-4">
<h4 id="org3020167"><span class="section-number-4">3.5.11</span> zremrangebyscore</h4>
<div class="outline-text-4" id="text-3-5-11">
<p>
&#x5220;&#x9664;&#x96C6;&#x5408;&#x4E2D;score&#x5728;&#x7ED9;&#x5B9A;&#x533A;&#x95F4;&#x7684;&#x5143;&#x7D20;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flushdb
zadd myzset 1 one 2 two 3 three 5 five
zremrangebyscore myzset 2 3
zrange myzset 0 -1 withscores</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org9cc5d44" class="outline-2">
<h2 id="org9cc5d44"><span class="section-number-2">4</span> &#x5E38;&#x7528;&#x547D;&#x4EE4;</h2>
<div class="outline-text-2" id="text-4">
<p>
Redis&#x63D0;&#x4F9B;&#x4E86;&#x4E30;&#x5BCC;&#x7684;&#x547D;&#x4EE4;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x548C;&#x5404;&#x79CD;&#x6570;&#x636E;&#x5E93;&#x7C7B;&#x578B;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x5728;Linux&#x7EC8;&#x7AEF;&#x4F7F;&#x7528;&#x3002;
</p>
</div>
<div id="outline-container-org9363d58" class="outline-3">
<h3 id="org9363d58"><span class="section-number-3">4.1</span> &#x952E;&#x503C;&#x76F8;&#x5173;&#x547D;&#x4EE4;</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-org60ccf2a" class="outline-4">
<h4 id="org60ccf2a"><span class="section-number-4">4.1.1</span> keys</h4>
<div class="outline-text-4" id="text-4-1-1">
<p>
&#x8FD4;&#x56DE;&#x6EE1;&#x8DB3;&#x7ED9;&#x5B9A;&#x6761;&#x4EF6;&#x7684;&#x6240;&#x6709;&#x952E;&#x3002;&#x652F;&#x6301;glob&#x98CE;&#x683C;&#x7684;&#x5339;&#x914D;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;h?ll&#x3001;h*llo&#x3001;h[ab]llo&#x3001;h[<sup>e</sup>]llo,h[a-b]llo&#x7B49;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">keys myzs*</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgffbf255" class="outline-4">
<h4 id="orgffbf255"><span class="section-number-4">4.1.2</span> exists</h4>
<div class="outline-text-4" id="text-4-1-2">
<p>
&#x786E;&#x8BA4;&#x4E00;&#x4E2A;key&#x662F;&#x5426;&#x5B58;&#x5728;&#x3002;&#x5B58;&#x5728;&#x8FD4;&#x56DE;1&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x8FD4;&#x56DE;0&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">exists name
exists myzset</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgf1ef38f" class="outline-4">
<h4 id="orgf1ef38f"><span class="section-number-4">4.1.3</span> del</h4>
<div class="outline-text-4" id="text-4-1-3">
<p>
&#x5220;&#x9664;&#x4E00;&#x4E2A;key&#x3002;&#x6210;&#x529F;&#x8FD4;&#x56DE;1&#xFF0C;&#x5931;&#x8D25;&#x8FD4;&#x56DE;0&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">del name
del myzset</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org471959a" class="outline-4">
<h4 id="org471959a"><span class="section-number-4">4.1.4</span> expire</h4>
<div class="outline-text-4" id="text-4-1-4">
<p>
&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;key&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">hmset myhash name wing age 30
expire myhash 10
ttl myhash</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org18111a3" class="outline-4">
<h4 id="org18111a3"><span class="section-number-4">4.1.5</span> move</h4>
<div class="outline-text-4" id="text-4-1-5">
<p>
&#x5C06;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;key&#x8F6C;&#x79FB;&#x5230;&#x5176;&#x4ED6;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">select 0
set age 30
get age
move age 1
get age
select 1
get age</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgeb2d12e" class="outline-4">
<h4 id="orgeb2d12e"><span class="section-number-4">4.1.6</span> persist</h4>
<div class="outline-text-4" id="text-4-1-6">
<p>
&#x79FB;&#x9664;&#x7ED9;&#x5B9A;key&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">set age 30
expire age 300
ttl age
persist age
ttl age</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgfa56d1e" class="outline-4">
<h4 id="orgfa56d1e"><span class="section-number-4">4.1.7</span> randomkey</h4>
<div class="outline-text-4" id="text-4-1-7">
<p>
&#x968F;&#x673A;&#x8FD4;&#x56DE;key&#x7A7A;&#x95F4;&#x7684;&#x4E00;&#x4E2A;key&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">randomkey</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgabc7def" class="outline-4">
<h4 id="orgabc7def"><span class="section-number-4">4.1.8</span> rename</h4>
<div class="outline-text-4" id="text-4-1-8">
<p>
&#x91CD;&#x547D;&#x540D;key&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">rename age name
get name</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgd85f09d" class="outline-4">
<h4 id="orgd85f09d"><span class="section-number-4">4.1.9</span> type</h4>
<div class="outline-text-4" id="text-4-1-9">
<p>
&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x7C7B;&#x578B;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">set name wing
hset myhash name wing
rpush mylist name age weight
sadd myset one tow
zadd myzset 1 one 2 tow 3 three
type age
type name
type myhash
type mylist
type myset
type myzset</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>

<div id="outline-container-org17b5ae2" class="outline-3">
<h3 id="org17b5ae2"><span class="section-number-3">4.2</span> &#x670D;&#x52A1;&#x5668;&#x76F8;&#x5173;&#x547D;&#x4EE4;</h3>
<div class="outline-text-3" id="text-4-2">
</div>
<div id="outline-container-org49c9039" class="outline-4">
<h4 id="org49c9039"><span class="section-number-4">4.2.1</span> ping</h4>
<div class="outline-text-4" id="text-4-2-1">
<p>
&#x6D4B;&#x8BD5;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x5B58;&#x6D3B;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">redis-cli ping</span><br><span class="line">sudo systemctl stop redis-server</span><br><span class="line">redis-cli ping</span><br><span class="line">sudo systemctl start redis-server</span><br><span class="line">redis-cli ping</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgb9ca002" class="outline-4">
<h4 id="orgb9ca002"><span class="section-number-4">4.2.2</span> echo</h4>
<div class="outline-text-4" id="text-4-2-2">
<p>
&#x5728;&#x547D;&#x4EE4;&#x884C;&#x6253;&#x5370;&#x4E00;&#x4E9B;&#x5185;&#x5BB9;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">echo wing</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org0a64df8" class="outline-4">
<h4 id="org0a64df8"><span class="section-number-4">4.2.3</span> select</h4>
<div class="outline-text-4" id="text-4-2-3">
<p>
&#x9009;&#x62E9;&#x6570;&#x636E;&#x5E93;&#x3002;Redis&#x6570;&#x636E;&#x5E93;&#x7F16;&#x53F7;&#x4ECE;0~15&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x6765;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x5B58;&#x53D6;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">select 1
select 16</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgdf1d5cf" class="outline-4">
<h4 id="orgdf1d5cf"><span class="section-number-4">4.2.4</span> dbsize</h4>
<div class="outline-text-4" id="text-4-2-4">
<p>
&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x4E2D;key&#x7684;&#x6570;&#x76EE;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">dbsize</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org3fdad13" class="outline-4">
<h4 id="org3fdad13"><span class="section-number-4">4.2.5</span> info</h4>
<div class="outline-text-4" id="text-4-2-5">
<p>
&#x83B7;&#x53D6;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4FE1;&#x606F;&#x548C;&#x7EDF;&#x8BA1;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">info</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org137724e" class="outline-4">
<h4 id="org137724e"><span class="section-number-4">4.2.6</span> config get</h4>
<div class="outline-text-4" id="text-4-2-6">
<p>
&#x5B9E;&#x65F6;&#x4F20;&#x8F93;&#x6536;&#x5230;&#x7684;&#x8BF7;&#x6C42;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">config get *
config get dir</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org9e8bdcc" class="outline-4">
<h4 id="org9e8bdcc"><span class="section-number-4">4.2.7</span> flushdb</h4>
<div class="outline-text-4" id="text-4-2-7">
<p>
&#x5220;&#x9664;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6240;&#x6709;key&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">dbsize
flushdb
dbsize</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org9b95fa8" class="outline-4">
<h4 id="org9b95fa8"><span class="section-number-4">4.2.8</span> flushall</h4>
<div class="outline-text-4" id="text-4-2-8">
<p>
&#x5220;&#x9664;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6240;&#x6709;key&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">dbsize
select 1
dbsize
flushall
dbsize</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgb9a2448" class="outline-4">
<h4 id="orgb9a2448"><span class="section-number-4">4.2.9</span> quit</h4>
<div class="outline-text-4" id="text-4-2-9">
<p>
&#x9000;&#x51FA;&#x8FDE;&#x63A5;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">quit</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org52cd20b" class="outline-2">
<h2 id="org52cd20b"><span class="section-number-2">5</span> Redis&#x9AD8;&#x7EA7;&#x4F7F;&#x7528;&#x7279;&#x6027;</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgdd1c139" class="outline-3">
<h3 id="orgdd1c139"><span class="section-number-3">5.1</span> &#x5B89;&#x5168;&#x6027;</h3>
<div class="outline-text-3" id="text-5-1">
<p>
&#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x540E;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x6307;&#x5B9A;&#x64CD;&#x4F5C;&#x524D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x5BC6;&#x7801;&#x3002;
&#x8B66;&#x544A;&#xFF1A;&#x56E0;&#x4E3A;Redis&#x901F;&#x5EA6;&#x76F8;&#x5F53;&#x5FEB;&#xFF0C;&#x6240;&#x6709;&#x4E00;&#x53F0;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#x7684;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x79D2;&#x949F;&#x8FDB;&#x884C;150K&#x6B21;&#x7684;&#x5BC6;&#x7801;&#x5C1D;&#x8BD5;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x8FD9;&#x4F60;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#x7684;&#x5BC6;&#x7801;&#x6765;&#x9632;&#x6B62;&#x66B4;&#x529B;&#x7834;&#x89E3;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> <span class="comment">#sudo sed &apos;/requirepass foobared/a\requirepass wing&apos; -i /etc/redis/redis.conf</span></span><br><span class="line">sudo systemctl restart redis-server</span><br></pre></td></tr></table></figure>
</div>

<div class="org-src-container">
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">redis-cli keys \*</span><br><span class="line">redis-cli  <span class="operator">-a</span> wing keys \*</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>

<div id="outline-container-orgf9a42f0" class="outline-3">
<h3 id="orgf9a42f0"><span class="section-number-3">5.2</span> &#x4E3B;&#x4ECE;&#x590D;&#x5236;</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x914D;&#x7F6E;&#x662F;&#x4F7F;&#x7528;&#x90FD;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x901A;&#x8FC7;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x53EF;&#x4EE5;&#x5141;&#x8BB8;&#x591A;&#x4E2A;slave server&#x62E5;&#x6709;&#x548C;master server&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x526F;&#x672C;&#x3002;
</p>
</div>
<div id="outline-container-orgae0c43c" class="outline-4">
<h4 id="orgae0c43c"><span class="section-number-4">5.2.1</span> Redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x7279;&#x70B9;</h4>
<div class="outline-text-4" id="text-5-2-1">
<ol class="org-ol">
<li>Master&#x53EF;&#x4EE5;&#x62E5;&#x6709;&#x591A;&#x4E2A;Slave&#x3002;</li>
<li>&#x591A;&#x4E2A;Slave&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x5230;&#x540C;&#x4E00;&#x4E2A;Master&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x5230;&#x5176;&#x4ED6;&#x7684;Slave&#x3002;</li>
<li>&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x4E0D;&#x4F1A;&#x963B;&#x585E;Master&#xFF0C;&#x5728;&#x540C;&#x6B65;&#x6570;&#x636E;&#x65F6;&#xFF0C;Master&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5904;&#x7406;client&#x8BF7;&#x6C42;&#x3002;</li>
<li>&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x7684;&#x4F38;&#x7F29;&#x6027;&#x3002;</li>
</ol>
</div>
</div>

<div id="outline-container-orgd555399" class="outline-4">
<h4 id="orgd555399"><span class="section-number-4">5.2.2</span> Redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x7A0B;</h4>
<div class="outline-text-4" id="text-5-2-2">
<ol class="org-ol">
<li>Slave&#x4E0E;Master&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#xFF0C;&#x53D1;&#x9001;gsync&#x540C;&#x6B65;&#x547D;&#x4EE4;</li>
<li>Master&#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x540E;&#x53F0;&#x8FDB;&#x7A0B;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x5E93;&#x5FEB;&#x7167;&#x4FDD;&#x5B58;&#x5230;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;Master&#x4E3B;&#x8FDB;&#x7A0B;&#x4F1A;&#x5F00;&#x59CB;&#x6536;&#x96C6;&#x65B0;&#x7684;&#x5199;&#x547D;&#x4EE4;&#x5E76;&#x7F13;&#x5B58;&#x3002;</li>
<li>&#x540E;&#x53F0;&#x5B8C;&#x6210;&#x4FDD;&#x5B58;&#x540E;&#xFF0C;&#x5C31;&#x5C06;&#x6B64;&#x6587;&#x4EF6;&#x53D1;&#x9001;&#x7ED9;Slave</li>
<li>Slave&#x5C06;&#x6B64;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5230;&#x786C;&#x76D8;&#x4E0A;&#x3002;</li>
</ol>
</div>
</div>
<div id="outline-container-org990badb" class="outline-4">
<h4 id="org990badb"><span class="section-number-4">5.2.3</span> &#x914D;&#x7F6E;&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;</h4>
<div class="outline-text-4" id="text-5-2-3">
<p>
&#x914D;&#x7F6E;Slave&#x670D;&#x52A1;&#x5668;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;Slave&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165;&#x4E00;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">#&#x6307;&#x5B9A;master&#x7684;ip&#x548C;&#x7AEF;&#x53E3;</span><br><span class="line">slaveof 192.168.1.1 6379</span><br><span class="line">#&#x6307;&#x5B9A;&#x4E3B;&#x673A;&#x7684;&#x5BC6;&#x7801;</span><br><span class="line">masterauth wing</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgf3753b7" class="outline-4">
<h4 id="orgf3753b7"><span class="section-number-4">5.2.4</span> &#x6D4B;&#x8BD5;</h4>
<div class="outline-text-4" id="text-5-2-4">
<p>
&#x6211;&#x4EEC;&#x5728;master&#x6570;&#x636E;&#x5E93;&#x4E0A;&#x8BBE;&#x7F6E;&#x4E00;&#x5BF9;&#x952E;&#x503C;&#x5BF9;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">set name master</span><br></pre></td></tr></table></figure>
</div>

<p>
&#x5728;slave&#x6570;&#x636E;&#x5E93;&#x4E0A;&#x53D6;&#x8FD9;&#x4E2A;&#x952E;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">get name</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x600E;&#x4E48;&#x5224;&#x65AD;&#x54EA;&#x4E2A;&#x662F;&#x4E3B;&#x54EA;&#x4E2A;&#x662F;&#x4ECE;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8C03;&#x7528;info&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E3B;&#x4ECE;&#x7684;&#x4FE1;&#x606F;&#x3002;
</p>
</div>
</div>
</div>
<div id="outline-container-org23c7e81" class="outline-3">
<h3 id="org23c7e81"><span class="section-number-3">5.3</span> &#x4E8B;&#x52A1;&#x5904;&#x7406;</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Redis&#x5BF9;&#x4E8B;&#x52A1;&#x7684;&#x652F;&#x6301;&#x76EE;&#x524D;&#x8FD8;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x3002;Redis&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x4E00;&#x4E2A;client&#x53D1;&#x8D77;&#x7684;&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x8FDE;&#x7EED;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E2D;&#x95F4;&#x4E0D;&#x4F1A;&#x63D2;&#x5165;&#x5176;&#x4ED6;client&#x7684;&#x547D;&#x4EE4;&#x3002;&#x5F53;&#x4E00;&#x4E2A;client&#x5728;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x4E2D;&#x53D1;&#x51FA;multi&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x4F1A;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x8BE5;&#x8FDE;&#x63A5;&#x540E;&#x7EED;&#x7684;&#x547D;&#x4EE4;&#x4E0D;&#x4F1A;&#x7ACB;&#x5373;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x662F;&#x5148;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x5F53;&#x6267;&#x884C;exec&#x547D;&#x4EE4;&#x65F6;&#xFF0C;redis&#x4F1A;&#x987A;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x3002;
</p>
</div>
<div id="outline-container-orgf071e06" class="outline-4">
<h4 id="orgf071e06"><span class="section-number-4">5.3.1</span> &#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;</h4>
<div class="outline-text-4" id="text-5-3-1">
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">auth wing
get age
multi
set age 10
set age 20
exec
get age</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org6b6f610" class="outline-4">
<h4 id="org6b6f610"><span class="section-number-4">5.3.2</span> &#x53D6;&#x6D88;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;</h4>
<div class="outline-text-4" id="text-5-3-2">
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">auth wing
set age 10
get age
multi
set age 10
set age 20
discard
get age</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgcd8f240" class="outline-4">
<h4 id="orgcd8f240"><span class="section-number-4">5.3.3</span> &#x4E50;&#x89C2;&#x9501;&#x590D;&#x6742;&#x4E8B;&#x52A1;&#x63A7;&#x5236;</h4>
<div class="outline-text-4" id="text-5-3-3">
<p>
&#x4E50;&#x89C2;&#x9501;&#xFF1A;&#x5927;&#x591A;&#x6570;&#x662F;&#x57FA;&#x4E8E;&#x6570;&#x636E;&#x7248;&#x672C;(version)&#x7684;&#x8BB0;&#x5F55;&#x673A;&#x5236;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x5373;&#x4E3A;&#x6570;&#x636E;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x6807;&#x8BC6;&#xFF0C;&#x5728;&#x57FA;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x7248;&#x672C;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x4E2D;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x5E93;&#x8868;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;version&#x5B57;&#x6BB5;&#x6765;&#x5B9E;&#x73B0;&#x8BFB;&#x53D6;&#x51FA;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5C06;&#x6B64;&#x7248;&#x672C;&#x53F7;&#x4E00;&#x540C;&#x8BFB;&#x51FA;&#xFF0C;&#x4E4B;&#x540E;&#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x5BF9;&#x6B64;&#x7248;&#x672C;&#x53F7;&#x52A0;1&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x5C06;&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x7684;&#x7248;&#x672C;&#x53F7;&#x4E0E;&#x6570;&#x636E;&#x8868;&#x5BF9;&#x5E94;&#x8BB0;&#x5F55;&#x7684;&#x5F53;&#x524D;&#x7248;&#x672C;&#x53F7;&#x8FDB;&#x884C;&#x6BD4;&#x5BF9;&#xFF0C;&#x5982;&#x679C;&#x63D0;&#x4EA4;&#x7684;&#x6570;&#x636E;&#x7248;&#x672C;&#x53F7;&#x5927;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x5F53;&#x524D;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x5219;&#x4E88;&#x4EE5;&#x66F4;&#x65B0;&#xFF0C;&#x5426;&#x5219;&#x8BA4;&#x4E3A;&#x662F;&#x8FC7;&#x671F;&#x6570;&#x636E;&#x3002;
</p>

<p>
Redis&#x4E50;&#x89C2;&#x9501;&#x5B9E;&#x4F8B;&#xFF1A;&#x5047;&#x8BBE;&#x6709;&#x4E00;&#x4E2A;age&#x7684;key&#xFF0C;&#x6211;&#x4EEC;&#x5F00;2&#x4E2A;session&#x6765;&#x5BF9;age&#x8FDB;&#x884C;&#x590D;&#x5236;&#x64CD;&#x4F5C;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#x3002;
&#x7B2C;&#x4E00;&#x6B65;&#x5F00;&#x542F;&#x4E00;&#x4E2A;session&#xFF1A;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">get age
watch age
multi
#&#x5F00;&#x542F;&#x7B2C;&#x4E8C;&#x4E2A;session
exec #&#x8FD4;&#x56DE;nil
get age</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x7B2C;&#x4E8C;&#x90E8;&#x5F00;&#x542F;&#x53E6;&#x5916;&#x4E00;&#x4E2A;session&#xFF1A;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">set age 30
get age</span><br></pre></td></tr></table></figure>
</div>
<p>
watch&#x547D;&#x4EE4;&#x76D1;&#x89C6;&#x7ED9;&#x5B9A;&#x7684;key&#xFF0C;&#x5F53;exec&#x6267;&#x884C;&#x7684;&#x65F6;&#x5019;&#x5982;&#x679C;&#x76D1;&#x89C6;&#x7684;key&#x4ECE;&#x8C03;&#x7528;watch&#x4E4B;&#x540E;&#x53D1;&#x751F;&#x8FC7;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x6574;&#x4E2A;&#x4E8B;&#x52A1;&#x4F1A;&#x5931;&#x8D25;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x8C03;&#x7528;watch&#x591A;&#x6B21;&#x76D1;&#x89C6;&#x591A;&#x4E2A;key&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x5BF9;&#x6307;&#x5B9A;&#x7684;key&#x52A0;&#x4E50;&#x89C2;&#x9501;&#x4E86;&#x3002;&#x6CE8;&#x610F;watch&#x7684;key&#x662F;&#x5BF9;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x6709;&#x6548;&#x7684;&#xFF0C;&#x4E8B;&#x52A1;&#x4E5F;&#x4E00;&#x6837;&#x3002;&#x5982;&#x679C;&#x8FDE;&#x63A5;&#x65AD;&#x5F00;&#x4E86;&#xFF0C;&#x76D1;&#x89C6;&#x548C;&#x4E8B;&#x52A1;&#x90FD;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x6E05;&#x9664;&#xFF0C;&#x5F53;&#x7136;&#x4E86;exec&#xFF0C;discard&#xFF0C;unwatch&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x6E05;&#x9664;&#x8FDE;&#x63A5;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x76D1;&#x89C6;&#x3002;
</p>

<p>
redis&#x7684;&#x4E8B;&#x52A1;&#x5B9E;&#x73B0;&#x662F;&#x5982;&#x6B64;&#x7B80;&#x5355;&#xFF0C;&#x5F53;&#x7136;&#x4F1A;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;redis&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x4E8B;&#x52A1;&#x7684;&#x6BCF;&#x4E2A;&#x547D;&#x4EE4;&#x8FDE;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x5931;&#x8D25;&#x4E86;&#xFF0C;&#x5E76;&#x4E0D;&#x56DE;&#x6EDA;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#xFF0C;&#x6BD4;&#x5982;&#x4F7F;&#x7528;&#x7684;&#x547D;&#x4EE4;&#x7C7B;&#x578B;&#x4E0D;&#x5339;&#x914D;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">auth wing
set age 30
set name wing
multi
incr age
incr name
exec
get age
get name</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x4ECE;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;age&#x7531;&#x4E8E;&#x662F;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x53EF;&#x4EE5;&#x6709;&#x81EA;&#x589E;&#x8FD0;&#x7B97;&#xFF0C;&#x4F46;&#x662F;name&#x662F;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x65E0;&#x6CD5;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x81EA;&#x589E;&#x8FD0;&#x7B97;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x5982;&#x679C;&#x6309;&#x4F20;&#x7EDF;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x7684;&#x601D;&#x8DEF;&#x6765;&#x8BB2;&#xFF0C;&#x6574;&#x4E2A;&#x4E8B;&#x52A1;&#x90FD;&#x4F1A;&#x56DE;&#x6EDA;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x770B;&#x5230;redis&#x5374;&#x662F;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x63D0;&#x4EA4;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x73B0;&#x8C61;&#x5BF9;&#x4E8E;&#x4E60;&#x60EF;&#x4E8E;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x7684;&#x670B;&#x53CB;&#x6765;&#x8BF4;&#x662F;&#x5F88;&#x522B;&#x626D;&#x7684;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x4E5F;&#x662F;redis&#x4ECA;&#x5929;&#x9700;&#x8981;&#x6539;&#x8FDB;&#x7684;&#x5730;&#x65B9;&#x3002;
</p>
</div>
</div>
</div>
<div id="outline-container-org01d0827" class="outline-3">
<h3 id="org01d0827"><span class="section-number-3">5.4</span> &#x6301;&#x4E45;&#x5316;&#x673A;&#x5236;</h3>
<div class="outline-text-3" id="text-5-4">
<p>
Redis&#x662F;&#x4E00;&#x4E2A;&#x652F;&#x6301;&#x6301;&#x4E45;&#x5316;&#x7684;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;redis&#x9700;&#x8981;&#x7ECF;&#x5E38;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5230;&#x786C;&#x76D8;&#x6765;&#x4FDD;&#x6301;&#x6301;&#x4E45;&#x5316;&#x3002;
Redis&#x652F;&#x6301;&#x4E24;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF1A;
</p>
<ol class="org-ol">
<li>snapshotting&#xFF08;&#x5FEB;&#x7167;&#xFF09;&#x4E5F;&#x662F;&#x9ED8;&#x8BA4;&#x65B9;&#x5F0F;&#x3002;</li>
<li>Append-only file&#xFF08;&#x7F29;&#x5199;aof&#xFF09;&#x7684;&#x65B9;&#x5F0F;&#x3002;</li>
</ol>
</div>
<div id="outline-container-orgcbd2320" class="outline-4">
<h4 id="orgcbd2320"><span class="section-number-4">5.4.1</span> snapshotting&#x65B9;&#x5F0F;</h4>
<div class="outline-text-4" id="text-5-4-1">
<p>
&#x5FEB;&#x7167;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x6570;&#x636E;&#x4EE5;&#x5FEB;&#x7167;&#x7684;&#x65B9;&#x5F0F;&#x5199;&#x5165;&#x5230;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x4E3A;dump.rdb&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x8BBE;&#x7F6E;&#x81EA;&#x52A8;&#x505A;&#x5FEB;&#x7167;&#x6301;&#x4E45;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;redis&#x5728;n&#x79D2;&#x5185;&#x5982;&#x679C;m&#x4E2A;key&#x88AB;&#x4FEE;&#x6539;&#x5C31;&#x81EA;&#x52A8;&#x505A;&#x5FEB;&#x7167;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">save 900 1 #900&#x79D2;&#x5185;&#x5982;&#x8D85;&#x8FC7;1&#x4E2A;key&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x5219;&#x53D1;&#x8D77;&#x5FEB;&#x7167;&#x4FDD;&#x5B58;</span><br><span class="line">save 300 10 #300&#x79D2;&#x5185;&#x5982;&#x8D85;&#x8FC7;10&#x4E2A;key&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x5219;&#x53D1;&#x8D77;&#x5FEB;&#x7167;&#x4FDD;&#x5B58;</span><br><span class="line">save 60 10000 #60&#x79D2;&#x5185;&#x5982;&#x8D85;&#x8FC7;10000&#x4E2A;key&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x5219;&#x53D1;&#x8D77;&#x5FEB;&#x7167;&#x4FDD;&#x5B58;</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-org422e03d" class="outline-4">
<h4 id="org422e03d"><span class="section-number-4">5.4.2</span> aof&#x65B9;&#x5F0F;</h4>
<div class="outline-text-4" id="text-5-4-2">
<p>
&#x7531;&#x4E8E;&#x5FEB;&#x7167;&#x65B9;&#x5F0F;&#x662F;&#x5728;&#x4E00;&#x5B9A;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#x505A;&#x4E00;&#x6B21;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;redis&#x610F;&#x5916;down&#x6389;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4F1A;&#x4E22;&#x5931;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x5FEB;&#x7167;&#x540E;&#x7684;&#x6240;&#x6709;&#x4FEE;&#x6539;&#x3002;aof&#x6BD4;&#x5FEB;&#x7167;&#x65B9;&#x5F0F;&#x6709;&#x66F4;&#x597D;&#x7684;&#x6301;&#x4E45;&#x5316;&#x59D3;&#xFF0C;&#x662F;&#x7531;&#x4E8E;&#x4F7F;&#x7528;aof&#x65F6;&#xFF0C;redis&#x4F1A;&#x5C06;&#x6BCF;&#x4E00;&#x4E2A;&#x6536;&#x5230;&#x7684;&#x5199;&#x547D;&#x4EE4;&#x90FD;&#x901A;&#x8FC7;write&#x51FD;&#x6570;&#x8FFD;&#x52A0;&#x5230;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5F53;redis&#x91CD;&#x542F;&#x65F6;&#x4F1A;&#x901A;&#x8FC7;&#x91CD;&#x65B0;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x4E2D;&#x4FDD;&#x5B58;&#x7684;&#x5199;&#x547D;&#x4EE4;&#x6765;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x91CD;&#x5EFA;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5185;&#x5BB9;&#x3002;
</p>

<p>
&#x5F53;&#x7136;&#x7531;&#x4E8E;os&#x4F1A;&#x5728;&#x5185;&#x6838;&#x4E2D;&#x7F13;&#x5B58;write&#x505A;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x7ACB;&#x5373;&#x5199;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#x3002;&#x8FD9;&#x6837;aof&#x65B9;&#x5F0F;&#x7684;&#x6301;&#x4E45;&#x5316;&#x4E5F;&#x8FD8;&#x662F;&#x6709;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x90E8;&#x5206;&#x4FEE;&#x6539;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x544A;&#x8BC9;redis&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x901A;&#x8FC7;fsync&#x51FD;&#x6570;&#x5F3A;&#x5236;os&#x5199;&#x5165;&#x5230;&#x78C1;&#x76D8;&#x7684;&#x65F6;&#x673A;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">appendonly yes   #&#x542F;&#x7528;aof&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;</span><br><span class="line">appendsync always #&#x6536;&#x5230;&#x5199;&#x547D;&#x4EE4;&#x5C31;&#x7ACB;&#x5373;&#x5199;&#x5165;&#x78C1;&#x76D8;&#xFF0C;&#x6700;&#x6162;&#xFF0C;&#x4F46;&#x662F;&#x4FDD;&#x8BC1;&#x5B8C;&#x5168;&#x7684;&#x6301;&#x4E45;&#x5316;</span><br><span class="line">appendsync everysec #&#x6BCF;&#x79D2;&#x949F;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x4E00;&#x6B21;&#xFF0C;&#x5728;&#x6027;&#x80FD;&#x548C;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x9762;&#x505A;&#x4E86;&#x5F88;&#x597D;&#x7684;&#x6298;&#x4E2D;</span><br><span class="line">appendsync no #&#x5B8C;&#x5168;&#x4F9D;&#x8D56;os&#xFF0C;&#x6027;&#x80FD;&#x6700;&#x597D;&#xFF0C;&#x6301;&#x4E45;&#x5316;&#x6CA1;&#x4FDD;&#x8BC1;</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="outline-container-org0cd32e5" class="outline-3">
<h3 id="org0cd32e5"><span class="section-number-3">5.5</span> &#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x4FE1;&#x606F;</h3>
<div class="outline-text-3" id="text-5-5">
<p>
   &#x53D1;&#x5E03;&#x8BA2;&#x9605;(pub/sub)&#x662F;&#x4E00;&#x79CD;&#x6D88;&#x606F;&#x901A;&#x4FE1;&#x6A21;&#x5F0F;&#xFF0C;&#x4E3B;&#x8981;&#x7684;&#x76EE;&#x7684;&#x662F;&#x89E3;&#x9664;&#x6D88;&#x606F;&#x53D1;&#x5E03;&#x8005;&#x548C;&#x8BA2;&#x9605;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#xFF0C;Redis&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;pub/sub&#x7684;server&#xFF0C;&#x5728;&#x8BA2;&#x9605;&#x8005;&#x548C;&#x53D1;&#x5E03;&#x8005;&#x4E4B;&#x95F4;&#x8D77;&#x5230;&#x4E86;&#x6D88;&#x606F;&#x8DEF;&#x7531;&#x7684;&#x529F;&#x80FD;&#x3002;&#x8BA2;&#x9605;&#x8005;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;subcrible&#x548C;psubscrible&#x547D;&#x4EE4;&#x60F3;redis server&#x8BA2;&#x9605;&#x81EA;&#x5DF1;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF0C;redis&#x5C06;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x79F0;&#x4E3A;&#x901A;&#x9053;(channel)&#x3002;&#x5F53;&#x53D1;&#x5E03;&#x8005;&#x901A;&#x8FC7;publish&#x547D;&#x4EE4;&#x5411;redis server&#x53D1;&#x9001;&#x7279;&#x5B9A;&#x7C7B;&#x578B;&#x7684;&#x4FE1;&#x606F;&#x65F6;&#xFF0C;&#x8BA2;&#x9605;&#x8BE5;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x7684;&#x5168;&#x90E8;client&#x90FD;&#x4F1A;&#x6536;&#x5230;&#x6B64;&#x6D88;&#x606F;&#x3002;
&#x5F00;&#x4E00;&#x4E2A;session&#x8BA2;&#x9605;&#x9891;&#x9053;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">subscribe channel1 channel2</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x518D;&#x5F00;&#x542F;&#x4E00;&#x4E2A;session&#x8BA2;&#x9605;&#x9891;&#x9053;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">subscribe channel1</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x5728;&#x5F00;&#x542F;&#x4E00;&#x4E2A;session&#x53D1;&#x5E03;&#x8BA2;&#x9605;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">publish channel1 hello
publish channel2 world</span><br></pre></td></tr></table></figure>
</div>
<p>
&#x7528;&#x4F8B;&#xFF1A;&#x57FA;&#x4E8E;web&#x7684;&#x6D88;&#x606F;&#x63A8;&#x9001;&#x3002;
</p>

<p>
&#x8BA2;&#x9605; sub.php
</p>
<div class="org-src-container">
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"><span class="variable">$ip</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$passwd</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$redis</span> = <span class="keyword">new</span> Redis();</span><br><span class="line"><span class="variable">$redis</span>-&gt;connect(<span class="variable">$ip</span>);</span><br><span class="line"><span class="variable">$redis</span>-&gt;auth(<span class="variable">$passwd</span>);</span><br><span class="line"><span class="comment">//&#x8BA2;&#x9605;</span></span><br><span class="line"><span class="variable">$redis</span>-&gt;subscribe([<span class="string">&apos;test&apos;</span>], <span class="function"><span class="keyword">function</span><span class="params">(<span class="variable">$instance</span>, <span class="variable">$channelName</span>, <span class="variable">$msg</span>)</span></span>{</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;data:&quot;</span>.<span class="variable">$msg</span>.<span class="string">&quot;\n\n&quot;</span>;</span><br><span class="line">});</span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br></pre></td></tr></table></figure>
</div>
<p>
&#x5218;&#x5E05;&#x7FFB;&#x8BD1;&#x7684;&#x300A;HTML5&#x6570;&#x636E;&#x63A8;&#x9001;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x300B;&#x8BE6;&#x7EC6;&#x53D9;&#x8FF0;&#x4E86;SSE&#x3001;WebSocket&#x6216;&#x8005;&#x6570;&#x636E;&#x62C9;&#x53D6;&#x65B9;&#x6848;&#x7684;&#x533A;&#x522B;&#x548C;&#x6570;&#x636E;&#x63A8;&#x9001;&#x7684;&#x517C;&#x5BB9;&#x6027;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#x3002;
</p>

<p>
&#x6D4B;&#x8BD5;&#x9875;&#x9762; index.html
</p>
<div class="org-src-container">
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span><br><span class="line">	<span class="comment">//&#x5148;&#x5224;&#x65AD;&#x652F;&#x4E0D;&#x652F;&#x6301;EventSource</span></span><br><span class="line">	<span class="keyword">var</span> source = <span class="keyword">new</span> EventSource(<span class="string">&quot;http://localhost/sub.php&quot;</span>);</span><br><span class="line">	source.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line">		<span class="built_in">console</span>.log(event);</span><br><span class="line">	}</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</div>
<p>
&#x53D1;&#x5E03; pub.php
</p>
<div class="org-src-container">
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"><span class="variable">$ip</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$passwd</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable">$redis</span> = <span class="keyword">new</span> Redis();</span><br><span class="line"><span class="variable">$redis</span>-&gt;connect(<span class="variable">$ip</span>);</span><br><span class="line"><span class="variable">$redis</span>-&gt;auth(<span class="variable">$passwd</span>);</span><br><span class="line"><span class="variable">$redis</span>-&gt;publish(<span class="string">&apos;test&apos;</span>,<span class="string">&apos;&#x8FD9;&#x91CC;&#x662F;&#x4F60;&#x8981;&#x63A8;&#x9001;&#x7684;&#x5185;&#x5BB9;&apos;</span>);</span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orga3b33f3" class="outline-3">
<h3 id="orga3b33f3"><span class="section-number-3">5.6</span> &#x865A;&#x62DF;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;</h3>
<div class="outline-text-3" id="text-5-6">
<p>
   Redis&#x7684;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x4E0E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x4E0D;&#x662F;&#x4E00;&#x56DE;&#x4E8B;&#xFF0C;&#x4F46;&#x662F;&#x601D;&#x8DEF;&#x548C;&#x76EE;&#x7684;&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;&#x5C31;&#x662F;&#x6682;&#x65F6;&#x628A;&#x4E0D;&#x7ECF;&#x5E38;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;&#x4ECE;&#x5185;&#x5B58;&#x4EA4;&#x6362;&#x5230;&#x78C1;&#x76D8;&#x4E2D;&#xFF0C;&#x4ECE;&#x800C;&#x817E;&#x51FA;&#x5B9D;&#x8D35;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7528;&#x4E8E;&#x5176;&#x4ED6;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;&#x3002;&#x5C24;&#x5176;&#x662F;&#x5BF9;&#x4E8E;redis&#x8FD9;&#x6837;&#x7684;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5185;&#x5B58;&#x603B;&#x662F;&#x4E0D;&#x591F;&#x7528;&#x7684;&#x3002;&#x9664;&#x4E86;&#x53EF;&#x4EE5;&#x5C06;&#x6570;&#x636E;&#x5206;&#x5272;&#x5230;&#x591A;&#x4E2A;redis server&#x5916;&#x3002;&#x53E6;&#x5916;&#x80FD;&#x591F;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x5E93;&#x5BB9;&#x91CF;&#x7684;&#x529E;&#x6CD5;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x628A;&#x90A3;&#x4E9B;&#x4E0D;&#x7ECF;&#x5E38;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#x3002;
&#x4E0B;&#x9762;&#x662F;vm&#x76F8;&#x5173;&#x914D;&#x7F6E;
</p>
<div class="org-src-container">
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">vm-enable yes                 #&#x5F00;&#x542F;vm&#x529F;&#x80FD;</span><br><span class="line">vm-swap-file /tmp/redis.swap  #&#x4EA4;&#x6362;&#x51FA;&#x6765;&#x7684;value&#x4FDD;&#x5B58;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</span><br><span class="line">vm-max-memory 1000000         #redis&#x4F7F;&#x7528;&#x989D;&#x6700;&#x5927;&#x5185;&#x5B58;&#x4E0A;&#x9650;</span><br><span class="line">vm-page size 32               #&#x6BCF;&#x4E2A;&#x9875;&#x9762;&#x7684;&#x5927;&#x5C0F;32&#x5B57;&#x8282;</span><br><span class="line">vm-pages 134217728            #&#x6700;&#x591A;&#x4F7F;&#x7528;&#x591A;&#x5C11;&#x9875;&#x9762;</span><br><span class="line">vm-max-threads 4              #&#x7528;&#x4E8E;&#x6267;&#x884C;value&#x5BF9;&#x8C61;&#x6362;&#x5165;&#x6362;&#x51FA;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
</div>
<div id="outline-container-orgaa8e13e" class="outline-2">
<h2 id="orgaa8e13e"><span class="section-number-2">6</span> &#x4E3A;web&#x5E94;&#x7528;&#x6DFB;&#x52A0;&#x9875;&#x9762;&#x7F13;&#x5B58;&#x529F;&#x80FD;</h2>
<div class="outline-text-2" id="text-6">
<p>
 &#x8BB8;&#x591A;&#x7F51;&#x7AD9;&#x5EFA;&#x8BBE;&#x521D;&#x671F;&#x53EA;&#x8003;&#x8651;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#xFF0C;SEO&#x4F18;&#x5316;&#xFF0C;&#x5E26;&#x6765;&#x4E86;&#x5DE8;&#x5927;&#x7684;&#x722C;&#x866B;&#x7684;&#x6D41;&#x91CF;&#xFF0C;&#x4E3A;&#x4E86;SEO&#x4FDD;&#x6301;&#x6548;&#x679C;&#xFF0C;&#x4E0D;&#x80FD;&#x963B;&#x6B62;&#x722C;&#x866B;&#x7684;&#x8BBF;&#x95EE;&#xFF0C;&#x66F4;&#x8981;&#x6B22;&#x8FCE;&#x722C;&#x866B;&#x7684;&#x5230;&#x6765;&#x3002;&#x90A3;&#x5982;&#x4F55;&#x624D;&#x80FD;&#x5E94;&#x5BF9;&#x722C;&#x866B;&#x5E26;&#x6765;&#x7684;&#x5DE8;&#x5927;&#x6D41;&#x91CF;&#x3002;&#x6700;&#x7B80;&#x5355;&#x6709;&#x6548;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x3002;
&#x7F51;&#x7AD9;&#x4EE3;&#x7801;&#x662F;&#x6DF7;&#x5408;php,sql&#x548C;html&#x7684;&#x539F;&#x59CB;&#x5199;&#x6CD5;&#xFF0C;&#x53EA;&#x8003;&#x8651;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#xFF0C;&#x5B8C;&#x5168;&#x4E0D;&#x8003;&#x8651;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#x7684;&#x3002;&#x4E0D;&#x53EF;&#x80FD;&#x50CF;Spring&#x90A3;&#x6837;&#x5728;&#x63A5;&#x53E3;&#x5C42;&#x9762;&#x53BB;&#x8003;&#x8651;&#x7F13;&#x5B58;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x9009;&#x62E9;&#x7C92;&#x5EA6;&#x8F83;&#x5927;&#x7684;&#x9875;&#x9762;&#x7F13;&#x5B58;&#x65B9;&#x5F0F;&#x3002;
</p>
<div class="org-src-container">
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">redisCache</span> </span>{</span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * $host : redis&#x670D;&#x52A1;&#x5668;ip</span><br><span class="line">    * $port : redis&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53E3;</span><br><span class="line">    * $lifetime : &#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x6709;&#x6548;&#x671F;,&#x5355;&#x4F4D;&#x4E3A;&#x79D2;</span><br><span class="line">    * $cacheid : &#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;,&#x5305;&#x542B;&#x6587;&#x4EF6;&#x540D;</span><br><span class="line">   */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="variable">$host</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="variable">$port</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="variable">$lifetime</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="variable">$cacheid</span>;</span><br><span class="line">   <span class="keyword">private</span> <span class="variable">$data</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="variable">$redis</span>;</span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * &#x6790;&#x6784;&#x51FD;&#x6570;,&#x68C0;&#x67E5;&#x7F13;&#x5B58;&#x76EE;&#x5F55;&#x662F;&#x5426;&#x6709;&#x6548;,&#x9ED8;&#x8BA4;&#x8D4B;&#x503C;</span><br><span class="line">   */</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">(<span class="variable">$lifetime</span>=<span class="number">1800</span>)</span> </span>{</span><br><span class="line">	<span class="comment">//&#x914D;&#x7F6E;</span></span><br><span class="line">	<span class="variable">$this</span>-&gt;host = <span class="string">&quot;127.0.0.1&quot;</span>;</span><br><span class="line">	<span class="variable">$this</span>-&gt;port = <span class="string">&quot;6379&quot;</span>;</span><br><span class="line">	<span class="variable">$redis</span> = <span class="keyword">new</span> Redis();</span><br><span class="line">	<span class="variable">$redis</span>-&gt;pconnect(<span class="variable">$this</span>-&gt;host,<span class="variable">$this</span>-&gt;port);</span><br><span class="line">	<span class="variable">$this</span>-&gt;redis=<span class="variable">$redis</span>;</span><br><span class="line">	<span class="variable">$this</span>-&gt;cacheid = <span class="variable">$this</span>-&gt;getcacheid();</span><br><span class="line">	<span class="variable">$this</span>-&gt;lifetime = <span class="variable">$lifetime</span>;</span><br><span class="line">	<span class="variable">$this</span>-&gt;data=<span class="variable">$redis</span>-&gt;hMGet(<span class="variable">$this</span>-&gt;cacheid, <span class="keyword">array</span>(<span class="string">&apos;content&apos;</span>,<span class="string">&apos;creattime&apos;</span>));</span><br><span class="line">	<span class="comment">//print_r($this-&gt;redis);</span></span><br><span class="line">	<span class="comment">//print_r($this-&gt;data);</span></span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * &#x68C0;&#x67E5;&#x7F13;&#x5B58;&#x662F;&#x5426;&#x6709;&#x6548;</span><br><span class="line">   */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">isvalid</span><span class="params">()</span></span>{</span><br><span class="line">       <span class="variable">$data</span>=<span class="variable">$this</span>-&gt;data;</span><br><span class="line">       <span class="keyword">if</span> (!<span class="variable">$data</span>[<span class="string">&apos;content&apos;</span>]) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       <span class="keyword">if</span> (time() - <span class="variable">$data</span>[<span class="string">&apos;creattime&apos;</span>] &gt; <span class="variable">$this</span>-&gt;lifetime) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   }</span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * &#x5199;&#x5165;&#x7F13;&#x5B58;</span><br><span class="line">    * $mode == 0 , &#x4EE5;&#x6D4F;&#x89C8;&#x5668;&#x7F13;&#x5B58;&#x7684;&#x65B9;&#x5F0F;&#x53D6;&#x5F97;&#x9875;&#x9762;&#x5185;&#x5BB9;</span><br><span class="line">   */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span><span class="params">(<span class="variable">$mode</span>=<span class="number">0</span>,<span class="variable">$content</span>=<span class="string">&apos;&apos;</span>)</span> </span>{</span><br><span class="line">       <span class="keyword">switch</span> (<span class="variable">$mode</span>) {</span><br><span class="line">	   <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">	       <span class="variable">$content</span> = ob_get_contents();</span><br><span class="line">	       <span class="keyword">break</span>;</span><br><span class="line">	   <span class="keyword">default</span>:</span><br><span class="line">	       <span class="keyword">break</span>;</span><br><span class="line">       }</span><br><span class="line">       ob_end_flush();</span><br><span class="line">       <span class="keyword">try</span> {</span><br><span class="line">	    <span class="variable">$this</span>-&gt;redis-&gt;hMset(<span class="variable">$this</span>-&gt;cacheid, <span class="keyword">array</span>(<span class="string">&apos;content&apos;</span>=&gt;<span class="variable">$content</span>,<span class="string">&apos;creattime&apos;</span>=&gt;time()));</span><br><span class="line">	    <span class="variable">$this</span>-&gt;redis-&gt;expireAt(<span class="variable">$this</span>-&gt;cacheid, time() + <span class="variable">$this</span>-&gt;lifetime);</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">catch</span> (<span class="keyword">Exception</span> <span class="variable">$e</span>) {</span><br><span class="line">	   <span class="variable">$this</span>-&gt;error(<span class="string">&apos;&#x5199;&#x5165;&#x7F13;&#x5B58;&#x5931;&#x8D25;!&apos;</span>);</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * &#x52A0;&#x8F7D;&#x7F13;&#x5B58;</span><br><span class="line">    * exit() &#x8F7D;&#x5165;&#x7F13;&#x5B58;&#x540E;&#x7EC8;&#x6B62;&#x539F;&#x9875;&#x9762;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;,&#x7F13;&#x5B58;&#x65E0;&#x6548;&#x5219;&#x8FD0;&#x884C;&#x539F;&#x9875;&#x9762;&#x7A0B;&#x5E8F;&#x751F;&#x6210;&#x7F13;&#x5B58;</span><br><span class="line">    * ob_start() &#x5F00;&#x542F;&#x6D4F;&#x89C8;&#x5668;&#x7F13;&#x5B58;&#x7528;&#x4E8E;&#x5728;&#x9875;&#x9762;&#x7ED3;&#x5C3E;&#x5904;&#x53D6;&#x5F97;&#x9875;&#x9762;&#x5185;&#x5BB9;</span><br><span class="line">   */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">load</span><span class="params">()</span> </span>{</span><br><span class="line">       <span class="keyword">if</span> (<span class="variable">$this</span>-&gt;isvalid()) {</span><br><span class="line">	   <span class="keyword">echo</span> <span class="variable">$this</span>-&gt;data[<span class="string">&apos;content&apos;</span>];</span><br><span class="line">	   <span class="keyword">exit</span>();</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">else</span> {</span><br><span class="line">	   ob_start();</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * &#x6E05;&#x9664;&#x7F13;&#x5B58;</span><br><span class="line">   */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">clean</span><span class="params">()</span> </span>{</span><br><span class="line">       <span class="keyword">try</span> {</span><br><span class="line">	   <span class="variable">$this</span>-&gt;redis-&gt;hDel(<span class="variable">$this</span>-&gt;cacheid, <span class="keyword">array</span>(<span class="string">&apos;content&apos;</span>,<span class="string">&apos;creattime&apos;</span>));</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">catch</span> (<span class="keyword">Exception</span> <span class="variable">$e</span>) {</span><br><span class="line">	   <span class="variable">$this</span>-&gt;error(<span class="string">&apos;&#x6E05;&#x9664;&#x7F13;&#x5B58;&#x5931;&#x8D25;!&apos;</span>);</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * &#x53D6;&#x5F97;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</span><br><span class="line">   */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">getcacheid</span><span class="params">()</span> </span>{</span><br><span class="line">       <span class="keyword">return</span> <span class="variable">$this</span>-&gt;dir.md5(<span class="variable">$this</span>-&gt;geturl()).<span class="variable">$this</span>-&gt;ext;</span><br><span class="line">   }</span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * &#x53D6;&#x5F97;&#x5F53;&#x524D;&#x9875;&#x9762;&#x5B8C;&#x6574;url</span><br><span class="line">   */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">geturl</span><span class="params">()</span> </span>{</span><br><span class="line">       <span class="variable">$url</span> = <span class="string">&apos;&apos;</span>;</span><br><span class="line">       <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&apos;REQUEST_URI&apos;</span>])) {</span><br><span class="line">	   <span class="variable">$url</span> = <span class="variable">$_SERVER</span>[<span class="string">&apos;REQUEST_URI&apos;</span>];</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">else</span> {</span><br><span class="line">	   <span class="variable">$url</span> = <span class="variable">$_SERVER</span>[<span class="string">&apos;Php_SELF&apos;</span>];</span><br><span class="line">	   <span class="variable">$url</span> .= <span class="keyword">empty</span>(<span class="variable">$_SERVER</span>[<span class="string">&apos;QUERY_STRING&apos;</span>])?<span class="string">&apos;&apos;</span>:<span class="string">&apos;?&apos;</span>.<span class="variable">$_SERVER</span>[<span class="string">&apos;QUERY_STRING&apos;</span>];</span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">echo</span> <span class="variable">$url</span>;</span><br><span class="line">       <span class="keyword">return</span> <span class="variable">$url</span>;</span><br><span class="line">   }</span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    * &#x8F93;&#x51FA;&#x9519;&#x8BEF;&#x4FE1;&#x606F;</span><br><span class="line">   */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">error</span><span class="params">(<span class="variable">$str</span>)</span> </span>{</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&apos;&lt;div style=&quot;color:red;&quot;&gt;&apos;</span>.<span class="variable">$str</span>.<span class="string">&apos;&lt;/div&gt;&apos;</span>;</span><br><span class="line">   }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//&#x7528;&#x6CD5;&#xFF1A;</span></span><br><span class="line"><span class="comment">// require_once(&apos;redisCache.php&apos;);</span></span><br><span class="line"><span class="comment">// $cache = new redisCache(10); //&#x8BBE;&#x7F6E;&#x7F13;&#x5B58;&#x751F;&#x5B58;&#x671F;</span></span><br><span class="line"><span class="comment">// if ($_GET[&apos;clearCache&apos;]) $cache-&gt;clean();</span></span><br><span class="line"><span class="comment">// else  $cache-&gt;load(); //&#x88C5;&#x8F7D;&#x7F13;&#x5B58;,&#x7F13;&#x5B58;&#x6709;&#x6548;&#x5219;&#x4E0D;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x9875;&#x9762;&#x4EE3;&#x7801;</span></span><br><span class="line"><span class="comment">// //&#x9875;&#x9762;&#x4EE3;&#x7801;&#x5F00;&#x59CB;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// //&#x9875;&#x9762;&#x4EE3;&#x7801;&#x7ED3;&#x675F;</span></span><br><span class="line"><span class="comment">// $cache-&gt;write(); //&#x9996;&#x6B21;&#x8FD0;&#x884C;&#x6216;&#x7F13;&#x5B58;&#x8FC7;&#x671F;,&#x751F;&#x6210;&#x7F13;&#x5B58;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div id="outline-container-orgfe5787f" class="outline-2">
<h2 id="orgfe5787f"><span class="section-number-2">7</span> &#x53C2;&#x8003;&#x6587;&#x7AE0;</h2>
<div class="outline-text-2" id="text-7">
<ol class="org-ol">
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-redis-server-as-a-session-handler-for-php-on-ubuntu-14-04" target="_blank" rel="noopener">How to Set Up a Redis Server as a Session Handler for PHP on Ubuntu 14.04</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/34899941" target="_blank" rel="noopener">&#x57FA;&#x4E8E;redis&#x7684;pub/sub&#x3001;EventSource&#x505A;&#x6D88;&#x606F;&#x63A8;&#x9001;</a></li>
<li><a href="https://blog.csdn.net/phpfenghuo/article/details/41204131" target="_blank" rel="noopener">php+redis&#x7F13;&#x5B58;&#x7C7B;</a></li>
</ol>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">&#x811A;&#x6CE8;: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.cnblogs.com/linjiqin/p/8003838.html" target="_blank" rel="noopener">Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x6B63;&#x786E;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://redis.io/commands/setnx" target="_blank" rel="noopener">Locking with SETNX</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://redis.io/commands/incr" target="_blank" rel="noopener">INCR key</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
Last Updated 2018-10-13 &#x516D; 13:39.<br>Created by <a href="https://www.gnu.org/software/emacs/" target="_blank" rel="noopener">Emacs</a> 25.1.1 (<a href="https://orgmode.org" target="_blank" rel="noopener">Org</a> mode 9.1.14)
</div>

      <script>
        window.disqusProxy={
          shortname: 'wing-ho',
          username: 'wing-ho',
          server: 'disqus-proxy.callmewing.com',
          port: 5509,
          adminAvatar: '/avatars/admin-avatar.jpg',
          identifier: '2018/10/06/redis/',
        };
        window.disqus_config = function () {
          this.page.url = window.location.href;
          this.page.identifier = window.disqusProxy.identifier;
        };
      </script></div><div class="tags"></div><div class="post-nav"><a class="next" href="/2018/10/03/逆向PT632_G2光猫固件/">逆向PT632 G2光猫固件</a></div>
      <script src="//cdn.bootcss.com/react/16.0.0/umd/react.production.min.js"></script>
      <script src="//cdn.bootcss.com/react-dom/16.0.0/umd/react-dom.production.min.js"></script>
      <script src="//cdn.bootcss.com/fetch/2.0.3/fetch.min.js"></script>
      <script src="//cdn.jsdelivr.net/npm/blockies-identicon@0.1.0/blockies.min.js"></script>
      <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
      <div id="disqus_proxy_thread"><script src="/scripts/hexo-disqus-proxy-primary.js" async></script><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'http://wing-ho.github.io/2018/10/06/redis/';
    this.page.identifier = '2018/10/06/redis/';
    this.page.title = '深入理解Redis';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//wing-ho.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//wing-ho.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://wing-ho.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://wing-ho.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Emacs/">Emacs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rapberry-Pi/">Rapberry Pi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Router/">Router</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VirtualBox/">VirtualBox</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/06/redis/">深入理解Redis</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/03/逆向PT632_G2光猫固件/">逆向PT632 G2光猫固件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/02/把镜像从KVM迁移到VirtualBox/">把镜像从KVM迁移到VirtualBox</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/10/把开发环境装进你的口袋/">把开发环境装进你的口袋</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/07/打造兼容BIOS和UEFI的启动盘/">打造兼容BIOS和UEFI的启动盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/09/批量下载喜马拉雅的免费专辑/">批量下载喜马拉雅的免费专辑</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/29/把电纸书打造成护眼开发神器/">把电纸书打造成护眼开发神器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/17/Hexo博客集成GitBook/">Hexo博客集成GitBook</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/12/用Wine运行那些你离不开的应用/">用Wine运行那些你离不开的应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/19/将Emacs写作环境转移到Windows/">将Emacs写作环境转移到Windows</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//wing-ho.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://blog.csdn.net/genrong" title="本人CSDN博客" target="_blank">本人CSDN博客</a><ul></ul><a href="https://blog.codingnow.com" title="云风" target="_blank">云风</a><ul></ul><a href="http://www.ruanyifeng.com/blog" title="阮一峰" target="_blank">阮一峰</a><ul></ul><a href="http://www.yinwang.org" title="王垠" target="_blank">王垠</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Wing.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script><script type="text/javascript" src="/js/toc4org.js?v=0.0.0"></script></div></body></html>